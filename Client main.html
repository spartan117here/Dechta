<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#0f172a" media="(prefers-color-scheme: dark)">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Quick Construct | Home Services & Hardware</title>
    
    <link rel="manifest" href="data:application/manifest+json;base64,ewogICJuYW1lIjogIlF1aWNrIENvbnN0cnVjdCIsCiAgInNob3J0X25hbWUiOiAiUUMiLAogICJzdGFydF91cmwiOiAiLiIsCiAgImRpc3BsYXkiOiAiYnJvd3NlciIsCiAgImJhY2tncm91bmRfY29xvciI6ICIjZmZmZmZmIiwKICAidGhlbWVfY29sb3IiOiAiIzAwMDAwMCIKfQ==" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/lucide@latest"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<div id="consultant-modal" class="fixed inset-0 z-[200] hidden">
    <div class="absolute inset-0 bg-black/60 modal-overlay backdrop-blur-sm" onclick="closeModal('consultant-modal')"></div>
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-slate-900 w-full max-w-sm rounded-2xl shadow-2xl p-6 modal-content scale-95 opacity-0 text-center border border-gray-100 dark:border-slate-800">
        
        <button onclick="closeModal('consultant-modal')" class="absolute top-4 right-4 text-gray-400 hover:text-black dark:hover:text-white transition-colors">
            <i data-lucide="x" class="w-6 h-6"></i>
        </button>

        <div class="w-16 h-16 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center mx-auto mb-4 border-4 border-white dark:border-slate-800 shadow-lg">
            <i data-lucide="headset" class="w-8 h-8 text-qc-black dark:text-white"></i>
        </div>

        <h3 class="text-xl font-bold dark:text-white mb-2">Estimate Consultant</h3>
        <p class="text-gray-500 dark:text-gray-400 text-sm mb-6">Need a quick quote? Call our expert directly.</p>

        <div class="bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 p-4 rounded-xl mb-6 flex flex-col items-center justify-center gap-1">
            <span class="text-xs font-bold text-gray-400 uppercase tracking-widest">Direct Line</span>
            <span class="text-2xl font-black text-gray-900 dark:text-white tracking-wide select-all">+91 86080 54350</span>
        </div>

        <a href="tel:+918608054350" class="flex items-center justify-center gap-2 w-full bg-qc-yellow text-black py-3.5 rounded-xl font-bold hover:bg-yellow-400 hover:shadow-lg hover:-translate-y-0.5 transition-all">
            <i data-lucide="phone" class="w-4 h-4 fill-current"></i>
            Call Now
        </a>
    </div>
</div>
<script>
    tailwind.config = {
        darkMode: 'class',
        theme: {
            extend: {
                fontFamily: { sans: ['Inter', 'sans-serif'] },
                colors: {
                    qc: {
                        black: '#0F172A',
                        // UPDATED: The exact color from your image
                        yellow: '#0CEDED', 
                        // UPDATED: A slightly darker version for hover states
                        primary: '#06b6b6',
                        gray: '#F3F4F6',
                        green: '#22C55E'
                    }
                },
                boxShadow: {
                    'card': '0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)',
                    'hover': '0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22)',
                    // UPDATED: Cyan glow
                    'glow-white': '0 0 15px rgba(12, 237, 237, 0.3)' 
                },
                // ... keep your existing animation/keyframes section here ...
                animation: {
                    'paint-roll': 'paintRoll 3s ease-in-out infinite',
                    'spin-slow': 'spin 3s linear infinite',
                    'spin-slow-reverse': 'spinReverse 3s linear infinite',
                    'spin-fast': 'spin 0.5s linear infinite',
                    'float': 'float 3s ease-in-out infinite',
                    'sparkle': 'sparkle 2s ease-in-out infinite',
                    'pulse-fast': 'pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    'bounce-in': 'bounceIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55)',
                    'breeze': 'breeze 2s ease-in-out infinite',
                    'cursor': 'cursor .75s step-end infinite',
                    'paint-stroke': 'paintStroke 3s ease-in-out infinite alternate',
                    'roller-move': 'rollerMove 3s ease-in-out infinite alternate',
                    'hammer': 'hammer 2s ease-in-out infinite',
                    'drip': 'drip 2s ease-in-out infinite',
                    'spray': 'spray 2s ease-out infinite',
                    'saw-action': 'sawAction 1s ease-in-out infinite',
                    'zap': 'zap 2s ease-in-out infinite',
                    'crane-swing': 'craneSwing 4s ease-in-out infinite',
                    'trowel-move': 'trowelMove 2s ease-in-out infinite',
                    'bin-lid': 'binLid 2.5s ease-in-out infinite',
                    'trash-fall': 'trashFall 2.5s ease-in infinite',
                    'glove-enter': 'gloveEnter 2.5s ease-in-out infinite',
                    'tool-hammer': 'toolHammer 2s ease-in-out infinite',
                    'tool-wrench': 'toolWrench 3s ease-in-out infinite',
                    'shine-slide': 'shineSlide 3s infinite linear',
                    'float-gentle': 'floatGentle 4s ease-in-out infinite',
                },
                keyframes: {
                    // ... keep your existing keyframes here ...
                    paintRoll: {
                        '0%, 100%': { transform: 'translateY(0) rotate(0deg)' },
                        '50%': { transform: 'translateY(-15px) rotate(-10deg)' },
                    },
                    spinReverse: {
                        '0%': { transform: 'rotate(0deg)' },
                        '100%': { transform: 'rotate(-360deg)' }
                    },
                    float: {
                        '0%, 100%': { transform: 'translateY(0)' },
                        '50%': { transform: 'translateY(-10px)' },
                    },
                    sparkle: {
                        '0%, 100%': { opacity: '0', transform: 'scale(0.5)' },
                        '50%': { opacity: '1', transform: 'scale(1.2)' },
                    },
                    bounceIn: {
                        '0%': { transform: 'scale(0.3)', opacity: '0' },
                        '100%': { transform: 'scale(1)', opacity: '1' }
                    },
                    breeze: {
                        '0%': { transform: 'translateX(0) scale(0.8)', opacity: '0.4' },
                        '50%': { transform: 'translateX(-20px) scale(1.1)', opacity: '1' },
                        '100%': { transform: 'translateX(-40px) scale(0.8)', opacity: '0' },
                    },
                    cursor: {
                        '0%, 100%': { borderRightColor: 'transparent' },
                        '50%': { borderRightColor: 'black' },
                    },
                    paintStroke: {
                        '0%': { strokeDashoffset: '1000' },
                        '100%': { strokeDashoffset: '0' }
                    },
                    rollerMove: {
                        '0%': { transform: 'translate(-20px, 280px) rotate(-10deg)' }, 
                        '100%': { transform: 'translate(280px, -20px) rotate(0deg)' }   
                    },
                    hammer: {
                        '0%, 100%': { transform: 'rotate(0deg)' },
                        '10%, 30%': { transform: 'rotate(-20deg)' },
                        '20%, 40%': { transform: 'rotate(10deg)' }
                    },
                    drip: {
                        '0%': { transform: 'translateY(0)', opacity: '0' },
                        '20%': { transform: 'translateY(0)', opacity: '1' },
                        '80%': { transform: 'translateY(15px)', opacity: '1' },
                        '100%': { transform: 'translateY(20px)', opacity: '0' }
                    },
                    spray: {
                        '0%': { opacity: '0', transform: 'translate(2px, -2px) scale(0.5)' },
                        '50%': { opacity: '1', transform: 'translate(6px, -6px) scale(1)' },
                        '100%': { opacity: '0', transform: 'translate(10px, -10px) scale(1.2)' }
                    },
                    sawAction: {
                        '0%, 100%': { transform: 'translateX(0) rotate(0deg)' },
                        '50%': { transform: 'translateX(-4px) rotate(-5deg)' }
                    },
                    zap: {
                        '0%, 100%': { opacity: '1', filter: 'drop-shadow(0 0 0 rgba(234, 179, 8, 0))' },
                        '50%': { opacity: '0.6', filter: 'drop-shadow(0 0 5px rgba(234, 179, 8, 0.8))' }
                    },
                    craneSwing: {
                        '0%, 100%': { transform: 'rotate(-5deg)' },
                        '50%': { transform: 'rotate(5deg)' }
                    },
                    trowelMove: {
                        '0%, 100%': { transform: 'translate(0,0) rotate(0deg)' },
                        '50%': { transform: 'translate(3px, -2px) rotate(-10deg)' }
                    },
                    binLid: {
                        '0%, 100%': { transform: 'rotate(0deg)', transformOrigin: '0 100%' },
                        '20%, 60%': { transform: 'rotate(-45deg)' }
                    },
                    gloveEnter: {
                        '0%, 100%': { transform: 'translate(40px, 0)' },
                        '30%, 70%': { transform: 'translate(0, 0)' }
                    },
                    trashFall: {
                        '0%, 30%': { transform: 'translate(0, 0)', opacity: '1' },
                        '50%': { transform: 'translate(0, 60px)', opacity: '1' },
                        '60%, 100%': { transform: 'translate(0, 70px)', opacity: '0' }
                    },
                    toolHammer: {
                        '0%, 100%': { transform: 'rotate(0deg)', transformOrigin: '100% 100%' },
                        '10%': { transform: 'rotate(-25deg)' },
                        '20%': { transform: 'rotate(0deg)' }, 
                        '25%': { transform: 'rotate(-10deg)' }, 
                        '30%': { transform: 'rotate(0deg)' }
                    },
                    toolWrench: {
                        '0%, 100%': { transform: 'rotate(0deg)', transformOrigin: '50% 50%' },
                        '50%': { transform: 'rotate(15deg)' }
                    },
                    shineSlide: {
                        '0%': { transform: 'translateX(-100%) translateY(-100%) rotate(45deg)' },
                        '100%': { transform: 'translateX(200%) translateY(200%) rotate(45deg)' }
                    },
                    floatGentle: {
                        '0%, 100%': { transform: 'translateY(0)' },
                        '50%': { transform: 'translateY(-5px)' }
                    }
                }
            }
        }
    }
  
</script>
    
    <script>
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark')
        } else {
            document.documentElement.classList.remove('dark')
        }
    </script>

    <style>
        .hide-scroll::-webkit-scrollbar { display: none; }
        .hide-scroll { -ms-overflow-style: none; scrollbar-width: none; }
        html { scroll-behavior: smooth; -webkit-tap-highlight-color: transparent; }
        .modal-overlay { transition: opacity 0.3s ease; }
        .modal-content { transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.3s ease; }
        .slider-btn { opacity: 0; transition: opacity 0.2s ease, transform 0.2s ease; }
        .slider-container:hover .slider-btn { opacity: 1; }
        .slider-btn:active { transform: scale(0.9); }
        .otp-input:focus { border-color: black; ring: 1px black; }
        .dark .otp-input:focus { border-color: white; ring: 1px white; }
        .pop-card { transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.3s ease; }
        .pop-card:hover { transform: translateY(-4px) scale(1.01); }
        .animated-card { overflow: hidden; transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .animated-card:hover { transform: translateY(-5px); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        .paint-mask { mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 80%, rgba(0,0,0,0)); -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 80%, rgba(0,0,0,0)); }
        .slot-btn.selected { background-color: #0F172A; color: white; border-color: #0F172A; }
        .dark .slot-btn.selected { background-color: white; color: black; border-color: white; }
        .slot-btn.selected span { color: white; opacity: 1; }
        .dark .slot-btn.selected span { color: black; }
        .time-btn.selected { background-color: #0F172A; color: white; border-color: #0F172A; }
        .dark .time-btn.selected { background-color: white; color: black; border-color: white; }
        .address-card.selected { border-color: #0F172A; background-color: #F8FAFC; }
        .dark .address-card.selected { border-color: white; background-color: #1e293b; }
        .address-card .check-icon { opacity: 0; transition: opacity 0.2s; }
        .address-card.selected .check-icon { opacity: 1; }
        .dark .address-card .check-icon { fill: white; color: white; }
        .scroll-trigger { opacity: 0; transform: translateY(30px); transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1); }
        .scroll-trigger.visible { opacity: 1; transform: translateY(0); }
      /* --- START OF HEART ANIMATION FIX --- */
        .heart-btn { 
            transition: transform 0.2s; 
        }
        .heart-btn:active { 
            transform: scale(0.8); 
        }
        
        /* FIX: We target 'svg' here because the icon library converts <i> to <svg> */
        .heart-btn.liked svg { 
            fill: #ef4444 !important;    /* Force fill red */
            stroke: #ef4444 !important;  /* Force outline red */
            color: #ef4444 !important;   /* Fallback color */
            animation: heartPop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        @keyframes heartPop {
            0% { transform: scale(1); }
            50% { transform: scale(1.4); }
            100% { transform: scale(1); }
        }
        /* --- END OF HEART ANIMATION FIX --- */
        
        /* Dark Mode Shadow Helper for Images */
        .dark .glow-filter { filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.3)); }

        /* Map Specific Styles */
        .leaflet-div-icon { background: transparent; border: none; }
        .user-pulse {
            width: 20px; height: 20px; background: #3b82f6; border-radius: 50%; border: 3px solid white; box-shadow: 0 0 10px rgba(0,0,0,0.3);
            position: relative;
        }
        .user-pulse::after {
            content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 60px; height: 60px; background: rgba(59, 130, 246, 0.3); border-radius: 50%;
            animation: radar 2s infinite ease-out; z-index: -1;
        }
        @keyframes radar {
            0% { width: 0; height: 0; opacity: 0.8; }
            100% { width: 100px; height: 100px; opacity: 0; }
        }
        .worker-marker {
            transition: all 1s linear;
        }

        /* MOBILE BOTTOM SHEET ANIMATIONS */
        @media (max-width: 768px) {
            .drawer-mobile {
                transform: translateY(100%) !important;
                bottom: 0 !important;
                top: auto !important;
                left: 0 !important;
                right: 0 !important;
                width: 100% !important;
                height: 85vh !important;
                border-top-left-radius: 24px;
                border-top-right-radius: 24px;
            }
            .drawer-mobile.open {
                transform: translateY(0) !important;
            }
        }

        /* SAFE AREA PADDING FOR IPHONES */
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
        .pt-safe { padding-top: env(safe-area-inset-top); }
        /* --- DARK MODE VISIBILITY FIX --- */
    .dark h1, .dark h2, .dark h3, .dark h4, .dark h5, .dark h6 { color: #ffffff !important; }
    .dark .text-gray-500, .dark .text-gray-400, .dark .text-gray-600 { color: #cbd5e1 !important; }
    .dark input, .dark textarea, .dark select { color: #ffffff !important; background-color: #1e293b !important; border-color: #475569 !important; }
    .dark input::placeholder, .dark textarea::placeholder { color: #94a3b8 !important; }
    .dark button span.text-\[10px\] { color: #e2e8f0 !important; }
    /* --- FIX FOR SLIDER CARDS (Force Light Theme Look) --- */
    
    /* 1. Force Text to be BLACK inside Hardware & Service sliders */
    #hardware-slider h3, 
    #hardware-slider span, 
    #services-slider h3, 
    #services-slider span {
        color: #0f172a !important; /* QC Black */
    }

    /* 2. Force Descriptions to be DARK GRAY */
    #hardware-slider p,
    #services-slider p,
    #services-slider .text-gray-500 {
        color: #64748b !important; /* Slate 500 */
    }

    /* 3. Force Card Backgrounds to be WHITE (overriding dark mode gray) */
    #hardware-slider .group > div:first-child, /* The image container */
    #services-slider .animated-card {
        background-color: #ffffff !important;
        border-color: #e2e8f0 !important;
    }
    
    /* 4. Fix the +/- Counter Buttons inside cards */
    #hardware-slider button {
        color: #000000 !important; /* Ensure buttons are visible */
    }
    /* --- FORCE BLACK TEXT FOR JOIN US SECTION --- */
    #join-us-section h2, 
    #join-us-section h3, 
    #join-us-section p, 
    #join-us-section span,
    #join-us-section button {
        color: #0f172a !important; /* Force Black */
    }
    
    #join-us-section .text-gray-500 {
        color: #64748b !important; /* Visible Dark Gray */
    }
    
    /* Force Cards to be White in Dark Mode */
    #join-us-section .bg-white,
    #join-us-section .dark\:bg-slate-900 {
        background-color: #ffffff !important;
        border-color: #f1f5f9 !important;
    }
    /* --- FORCE DARK TEXT ONLY (No Background Changes) --- */
    #join-us-section h2, 
    #join-us-section h3, 
    #join-us-section button,
    #join-us-section span {
        color: #0f172a !important; /* Force Black */
    }

    #join-us-section p,
    #join-us-section .text-gray-500 {
        color: #475569 !important; /* Force Dark Gray for descriptions */
    }
    /* --- DARK MODE: BLACK CARDS & WHITE TEXT --- */

    /* 1. Hardware Slider: Dark Card, White Text */
    .dark #hardware-slider .snap-start {
        background-color: #0f172a !important; /* QC Black/Slate 900 */
        border: 1px solid #1e293b !important; /* Dark Border */
        color: #ffffff !important;
    }
    .dark #hardware-slider h3, 
    .dark #hardware-slider span {
        color: #ffffff !important; /* Force White Title/Price */
    }
    .dark #hardware-slider p,
    .dark #hardware-slider .text-gray-500 {
        color: #94a3b8 !important; /* Light Gray Description */
    }
    /* Fix Image Background in Dark Mode */
    .dark #hardware-slider .group > div:first-child {
        background-color: #1e293b !important; /* Darker Slate for image area */
        border: none !important;
    }


    /* 2. Services Slider: Dark Card, White Text */
    .dark #services-slider .animated-card {
        background-color: #0f172a !important;
        border: 1px solid #1e293b !important;
    }
    .dark #services-slider h3,
    .dark #services-slider span {
        color: #ffffff !important;
    }
    .dark #services-slider .text-gray-500 {
        color: #94a3b8 !important;
    }
    /* Fix 'Add' button to be visible */
    .dark #services-slider button {
        color: #fbbf24 !important; /* QC Yellow for visibility */
    }


    /* 3. Join Us Section: Dark Card, White Text */
    .dark #join-us-section .group {
        background-color: #0f172a !important;
        border: 1px solid #1e293b !important;
    }
    .dark #join-us-section h3 {
        color: #ffffff !important;
    }
    .dark #join-us-section p {
        color: #94a3b8 !important;
    }
    /* --- FIX: JOIN US SECTION (Dark Mode Visibility) --- */
    
    /* 1. Force Card Background to Black */
    .dark #join-us-section .group {
        background-color: #0f172a !important; /* Black Card */
        border-color: #1e293b !important;
    }

    /* 2. Force HEADINGS (Join as Pro, Drive, etc.) to White */
    .dark #join-us-section h3 {
        color: #ffffff !important;
    }

    /* 3. Force BUTTON TEXT (Start Selling, Register) to White */
    /* This overrides the orange/blue/green text colors in dark mode */
    .dark #join-us-section button {
        color: #ffffff !important; 
    }

    /* 4. Force Description Text to Light Gray */
    .dark #join-us-section p, 
    .dark #join-us-section .text-gray-500 {
        color: #cbd5e1 !important; 
    }
    /* --- FIX: HARDWARE QUANTITY COUNTER (+ - Buttons) --- */
    
    /* Target the counter container */
    #hardware-slider .snap-start .shadow-xl.animate-bounce-in {
        background-color: #ffffff !important; /* Always White Background */
        border: 1px solid #e2e8f0 !important; /* Subtle Border */
    }

    /* Force the Text and Buttons to be Black */
    #hardware-slider .snap-start .shadow-xl.animate-bounce-in button,
    #hardware-slider .snap-start .shadow-xl.animate-bounce-in span {
        color: #000000 !important; /* Always Black Text */
        font-weight: 800 !important;
    }

    /* Add a hover effect for the buttons */
    #hardware-slider .snap-start .shadow-xl.animate-bounce-in button:hover {
        background-color: #f1f5f9 !important; /* Light Gray on Hover */
    }
    /* Phone Scroll Animation */
@keyframes phoneScroll {
    0% { transform: translateY(0); }
    100% { transform: translateY(-50%); } /* Moves halfway up then resets */
}

.animate-phone-scroll {
    animation: phoneScroll 15s linear infinite;
    will-change: transform;
}

/* Pause animation on hover */
.animate-phone-scroll:hover {
    animation-play-state: paused;
}
/* --- LOADING SCREEN ANIMATIONS --- */

/* --- SVG ANIMATION SEQUENCE --- */

/* 1. Truck Animation */
#loader-truck {
    animation: truck-drive-cycle 2.5s cubic-bezier(0.25, 1, 0.5, 1) forwards;
}

#truck-bed {
    animation: bed-tilt 0.6s 0.8s ease-in-out forwards;
}

.animate-spin-tire {
    animation: tire-spin 2.5s linear forwards;
}

/* 2. Pile Animation */
#loader-pile {
    animation: pile-grow 0.5s 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

/* 3. Workers Animation */
#loader-workers {
    animation: workers-slide-in 0.8s 1.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* 4. Hammering Action */
.animate-hammer-left {
    animation: hammer-swing-left 0.4s 2.2s infinite alternate ease-in-out;
}
.animate-hammer-right {
    animation: hammer-swing-right 0.4s 2.2s infinite alternate ease-in-out;
}

/* 5. Logo Reveal */
#loader-logo {
    animation: logo-fade-in 0.8s 3.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

/* 6. Progress Bar */
#loader-progress {
    animation: progress-fill-bar 4s cubic-bezier(0.45, 0, 0.55, 1) forwards;
}

/* --- KEYFRAMES --- */

@keyframes truck-drive-cycle {
    0% { transform: translateX(0); }
    30% { transform: translateX(280px); } /* Arrive & Stop */
    60% { transform: translateX(280px); } /* Wait for dump */
    100% { transform: translateX(650px); } /* Drive away */
}

@keyframes bed-tilt {
    0% { transform: rotate(0deg); }
    50% { transform: rotate(-25deg); } /* Dump */
    100% { transform: rotate(0deg); } /* Return */
}

@keyframes tire-spin {
    0% { transform: rotate(0deg); }
    30% { transform: rotate(360deg); }
    60% { transform: rotate(360deg); }
    100% { transform: rotate(720deg); }
}

@keyframes pile-grow {
    0% { transform: translateX(-50%) scale(0); opacity: 0; }
    80% { transform: translateX(-50%) scale(1.1); opacity: 1; }
    100% { transform: translateX(-50%) scale(1); opacity: 1; }
}

@keyframes workers-slide-in {
    0% { opacity: 0; transform: translate(-50%, 20px); }
    100% { opacity: 1; transform: translate(-50%, 0); }
}

@keyframes hammer-swing-left {
    from { transform: rotate(-20deg); }
    to { transform: rotate(10deg); }
}

@keyframes hammer-swing-right {
    from { transform: rotate(20deg); }
    to { transform: rotate(-10deg); }
}

@keyframes logo-fade-in {
    0% { opacity: 0; transform: scale(0.9); backdrop-filter: blur(0); }
    100% { opacity: 1; transform: scale(1); backdrop-filter: blur(12px); }
}

@keyframes progress-fill-bar {
    0% { width: 0%; }
    100% { width: 100%; }
}

@keyframes shine-slide {
    0% { transform: translateX(-100%) rotate(45deg); }
    100% { transform: translateX(200%) rotate(45deg); }
}
.animate-shine-slide {
    animation: shine-slide 3s infinite linear;
}

/* Spin wheels */
.animate-spin-fast {
    animation: spin 0.5s linear infinite;
}
    </style>
</head>
<body class="relative bg-gradient-to-br from-cyan-50 via-white to-sky-100 text-qc-black dark:from-slate-950 dark:via-cyan-950/10 dark:to-slate-900 dark:text-white transition-colors duration-300 min-h-screen">
    <div id="floating-texture" class="fixed inset-0 z-0 pointer-events-none overflow-hidden select-none">
        </div>
        <div id="floating-texture" class="fixed inset-0 z-0 pointer-events-none overflow-hidden">
        </div>
   <div id="loader-wrapper" class="fixed inset-0 z-[9999] bg-white dark:bg-slate-950 flex flex-col items-center justify-center overflow-hidden transition-opacity duration-500 font-sans">
    
    <div class="relative w-[360px] h-[240px] mb-8 flex items-end justify-center overflow-hidden">
        
        <svg id="loader-truck" viewBox="0 0 200 120" class="absolute bottom-0 left-[-220px] w-52 h-32 z-30 drop-shadow-xl will-change-transform">
            <rect x="20" y="80" width="120" height="15" rx="2" fill="#334155" />
            <g class="animate-spin-tire" transform-origin="45 105">
                <circle cx="45" cy="105" r="14" fill="#1e293b" stroke="#475569" stroke-width="4"/>
                <circle cx="45" cy="105" r="5" fill="#94a3b8"/>
            </g>
            <g class="animate-spin-tire" transform-origin="115 105">
                <circle cx="115" cy="105" r="14" fill="#1e293b" stroke="#475569" stroke-width="4"/>
                <circle cx="115" cy="105" r="5" fill="#94a3b8"/>
            </g>
            <path d="M120 80 L120 45 L145 45 L160 65 L160 80 Z" fill="#facc15" /> <path d="M145 50 L155 65 L145 65 Z" fill="#334155" opacity="0.8"/> <g id="truck-bed" transform-origin="30 80">
                <path d="M10 40 L110 40 L100 80 L20 80 Z" fill="#eab308" /> <rect x="15" y="35" width="90" height="5" fill="#ca8a04"/> <path d="M40 55 L80 55 L75 65 L45 65 Z" fill="#ca8a04" opacity="0.4"/> </g>
        </svg>

        <svg id="loader-pile" viewBox="0 0 100 60" class="absolute bottom-0 left-1/2 -translate-x-1/2 w-32 h-20 z-20 opacity-0 origin-bottom">
            <g id="pile-group">
                <rect x="20" y="45" width="15" height="8" fill="#ef4444" rx="1"/>
                <rect x="38" y="45" width="15" height="8" fill="#f97316" rx="1"/>
                <rect x="56" y="45" width="15" height="8" fill="#ef4444" rx="1"/>
                <rect x="28" y="35" width="15" height="8" fill="#f97316" rx="1"/>
                <rect x="46" y="35" width="15" height="8" fill="#ef4444" rx="1"/>
                <rect x="37" y="25" width="15" height="8" fill="#f97316" rx="1"/>
            </g>
        </svg>

        <div id="loader-workers" class="absolute bottom-0 left-1/2 -translate-x-1/2 w-48 h-28 z-40 opacity-0 flex justify-between items-end px-2">
            <svg class="w-16 h-20 overflow-visible" viewBox="0 0 50 80">
                <g class="animate-hammer-left" transform-origin="35 35">
                    <rect x="25" y="30" width="20" height="6" fill="#fca5a5" transform="rotate(-20)" rx="2"/>
                    <rect x="40" y="20" width="6" height="20" fill="#475569" transform="rotate(-10)"/>
                    <rect x="35" y="18" width="16" height="8" fill="#1e293b" transform="rotate(-10)"/>
                </g>
                <path d="M15 80 L15 40 Q15 30 25 30 Q35 30 35 40 L35 80 Z" fill="#2563eb"/> <circle cx="25" cy="20" r="10" fill="#fca5a5"/>
                <path d="M13 18 Q25 5 37 18" fill="#fbbf24" stroke="#f59e0b" stroke-width="2"/>
            </svg>

            <svg class="w-16 h-20 overflow-visible" viewBox="0 0 50 80">
                <g class="animate-hammer-right" transform-origin="15 35">
                    <rect x="5" y="30" width="20" height="6" fill="#fca5a5" transform="rotate(20)" rx="2"/>
                    <rect x="0" y="20" width="6" height="20" fill="#475569" transform="rotate(10)"/>
                    <rect x="-5" y="18" width="16" height="8" fill="#1e293b" transform="rotate(10)"/>
                </g>
                <path d="M15 80 L15 40 Q15 30 25 30 Q35 30 35 40 L35 80 Z" fill="#f97316"/> <circle cx="25" cy="20" r="10" fill="#fca5a5"/>
                <path d="M13 18 Q25 5 37 18" fill="#fbbf24" stroke="#f59e0b" stroke-width="2"/>
            </svg>
        </div>

        <div id="loader-logo" class="absolute inset-0 flex flex-col items-center justify-center opacity-0 scale-50 z-50 bg-white/95 dark:bg-slate-950/95 backdrop-blur-xl">
            <div class="w-20 h-20 bg-gradient-to-br from-cyan-400 via-cyan-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-2xl mb-4 animate-pulse-slow relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-full bg-white/20 animate-shine-slide"></div>
                <span class="text-black font-black text-4xl tracking-tighter relative z-10">QC</span>
            </div>
            <h1 class="text-3xl font-extrabold text-slate-900 dark:text-white">Quick Construct</h1>
            <div class="flex items-center gap-2 mt-2">
                <div class="w-2 h-2 bg-green-500 rounded-full animate-bounce"></div>
                <p class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-widest">Ready</p>
            </div>
        </div>

    </div>

    <div class="w-64 h-1 bg-gray-200 dark:bg-slate-800 rounded-full overflow-hidden relative">
        <div id="loader-progress" class="absolute top-0 left-0 h-full bg-black dark:bg-white w-0"></div>
    </div>
    
    <div class="mt-4 flex flex-col items-center h-6 overflow-hidden">
         <p class="text-xs font-bold text-gray-400 uppercase tracking-widest animate-pulse" id="loading-text">Loading...</p>
    </div>

</div>
  

    <!-- ================= HEADER ================= -->
<nav class="fixed top-0 w-full bg-white/95 dark:bg-slate-950/95 backdrop-blur-md z-40 border-b border-gray-100 dark:border-slate-800 transition-all duration-300 pt-safe" id="navbar">
  
    <div class="hidden lg:flex w-full px-10 items-center justify-between gap-8 h-20">
        
        <a href="#" class="flex items-center gap-2" onclick="window.scrollTo(0,0)">
            <div class="w-10 h-10 bg-gradient-to-br from-cyan-400 via-cyan-500 to-blue-500 rounded-lg flex items-center justify-center text-black font-black text-xl shadow-lg">QC</div>
            <span class="font-bold text-xl tracking-tight dark:text-white">Quick Construct</span>
        </a>

        <button onclick="openModal('location-modal')" class="flex flex-col items-start hover:bg-gray-50 dark:hover:bg-slate-900 px-3 py-1.5 rounded-lg transition-colors">
            <div class="flex items-center gap-1 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide">
                <i data-lucide="map-pin" class="w-3 h-3"></i> Current Location
            </div>
            <div class="flex items-center gap-1 font-bold text-sm text-gray-900 dark:text-white">
                <span id="header-location">Anna Nagar, Chennai</span>
                <i data-lucide="chevron-down" class="w-4 h-4 text-gray-400"></i>
            </div>
        </button>

        <div class="flex-1 max-w-2xl mx-auto relative group">
            <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"></i>
            <input type="text" id="global-search-desktop" placeholder="Search for 'AC Repair'..." class="w-full h-12 bg-gray-100 dark:bg-slate-900 rounded-xl pl-12 pr-4 font-medium text-base text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-black/5 dark:focus:ring-white/10 focus:shadow-lg transition-all" onkeyup="handleSearch(this.value)">
        </div>

        <div class="flex items-center gap-6">
            <button onclick="openWishlist()" class="font-bold text-sm hover:text-gray-600 dark:hover:text-gray-300">Saved</button>
            <button onclick="openBookings()" class="font-bold text-sm hover:text-gray-600 dark:hover:text-gray-300">Bookings</button>
            <button onclick="openModal('support-modal')" class="font-bold text-sm hover:text-gray-600 dark:hover:text-gray-300">Support</button>
            <div class="h-6 w-px bg-gray-200 dark:bg-slate-800"></div>
            
            <button onclick="toggleTheme()" class="p-2 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-full">
                <div class="hidden dark:block"><i data-lucide="sun" class="w-6 h-6 text-white"></i></div>
                <div class="dark:hidden"><i data-lucide="moon" class="w-6 h-6 text-gray-700"></i></div>
            </button>
            
            <button onclick="toggleCart()" class="relative p-2 hover:bg-gray-50 dark:hover:bg-slate-800 rounded-full group">
                <i data-lucide="shopping-cart" class="w-6 h-6 text-gray-700 dark:text-gray-200"></i>
                <span id="cart-badge" class="absolute top-0 right-0 w-5 h-5 bg-black text-white text-xs font-bold flex items-center justify-center rounded-full scale-0 transition-transform">0</span>
            </button>
            
          <div id="auth-section">
    <button onclick="openModal('login-modal')" class="bg-black dark:bg-white text-white dark:text-black px-5 py-2.5 rounded-lg font-bold text-sm shadow-md">Login</button>
</div>
        </div>
    </div>

    <div class="lg:hidden w-full px-4 py-3 flex items-center gap-3">
        <a href="#" class="shrink-0" onclick="window.scrollTo(0,0)">
           <div class="w-9 h-9 bg-gradient-to-br from-cyan-400 via-cyan-500 to-blue-500 rounded-lg flex items-center justify-center text-black font-black text-lg shadow-lg">QC</div>
        </a>
        
        <div class="flex-1 relative">
            <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"></i>
            <input type="text" id="global-search-mobile" placeholder="Search for services..." class="w-full h-10 bg-gray-100 dark:bg-slate-900 rounded-lg pl-9 pr-3 text-sm font-medium focus:outline-none focus:ring-1 focus:ring-black dark:focus:ring-white dark:text-white" onkeyup="handleSearch(this.value)" onclick="document.getElementById('search-results').classList.remove('hidden')">
        </div>

        <button onclick="toggleCart()" class="relative shrink-0 p-1">
            <i data-lucide="shopping-bag" class="w-6 h-6 text-gray-900 dark:text-white"></i>
            <span id="cart-badge-mobile" class="absolute -top-1 -right-1 w-4 h-4 bg-red-600 text-white text-[10px] font-bold flex items-center justify-center rounded-full scale-0 transition-transform">0</span>
        </button>
    </div>
    
    <div id="search-results" class="absolute top-16 lg:top-20 left-0 w-full bg-white dark:bg-slate-900 shadow-xl border-t border-gray-100 dark:border-slate-800 hidden overflow-hidden z-50 max-h-[60vh] overflow-y-auto"></div>
</nav>
    <!-- NEW: FLOATING MAGNETIC HIRE PROS BUTTON (UPDATED ACTION) -->
 <div id="crane-wrapper" class="fixed top-20 right-8 z-30 hidden md:flex flex-col items-center pointer-events-none origin-top animate-crane-swing">
   
   <img src="https://image.similarpng.com/file/similarpng/original-picture/2020/08/Crane-hook-on-transparent-background-PNG.png" 
        class="w-14 h-20 object-contain -mb-6 relative z-20 drop-shadow-lg" 
        alt="Crane Hook">

   <button id="hire-float-btn" onclick="openHireMap()" class="pointer-events-auto bg-black dark:bg-white text-white dark:text-black px-6 py-3 rounded-xl font-bold shadow-2xl hover:scale-110 transition-transform duration-200 ease-out group flex items-center gap-2 border-2 border-yellow-400 relative z-10">
       
       <div class="absolute -top-4 left-1/2 -translate-x-1/2 w-1.5 h-6 bg-gray-500 rounded-full"></div>
       <div class="absolute -top-1 left-1/2 -translate-x-1/2 w-3 h-3 bg-gray-800 rounded-full"></div>

       <span>Hire Pros</span>
       <div class="w-6 h-6 bg-qc-yellow rounded-full flex items-center justify-center text-black">
           <i data-lucide="map" class="w-3 h-3 group-hover:rotate-12 transition-transform"></i>
       </div>
   </button>

</div>

    <!-- ================= MAIN CONTENT ================= -->
<main class="max-w-7xl mx-auto px-4 pt-20 lg:pt-28 pb-24 space-y-8 lg:space-y-16">

        <!-- SECTION: CIRCULAR CATEGORIES -->
   <section class="flex justify-center gap-6 md:gap-16 pb-4 scroll-trigger delay-75">
    
    <div class="flex flex-col items-center gap-3 cursor-pointer group min-w-[90px]" onclick="openDrawer('loadman')">
        <div class="relative w-24 h-24 flex items-center justify-center">
            <div class="absolute inset-0 bg-blue-100 dark:bg-blue-900/30 rounded-full scale-90 group-hover:scale-100 transition-transform duration-500 ease-out"></div>
            <div class="absolute inset-0 bg-blue-200 dark:bg-blue-800/20 rounded-full scale-75 opacity-0 group-hover:animate-ping-slow"></div>
            
            <img src="https://cdn-icons-png.flaticon.com/512/2684/2684218.png" 
                 class="w-14 h-14 object-contain relative z-10 animate-float-icon transition-transform duration-500 group-hover:scale-110 group-hover:-rotate-6 drop-shadow-lg" 
                 alt="Loadman">
        </div>
        <span class="text-sm font-bold text-center text-gray-700 dark:text-gray-300 group-hover:text-black dark:group-hover:text-white transition-colors">Loadman</span>
    </div>

    <div class="flex flex-col items-center gap-3 cursor-pointer group min-w-[90px]" onclick="openDrawer('mason')">
        <div class="relative w-24 h-24 flex items-center justify-center">
            <div class="absolute inset-0 bg-red-100 dark:bg-red-900/30 rounded-full scale-90 group-hover:scale-100 transition-transform duration-500 ease-out"></div>
            <div class="absolute inset-0 bg-red-200 dark:bg-red-800/20 rounded-full scale-75 opacity-0 group-hover:animate-ping-slow"></div>
            
            <img src="https://png.pngtree.com/png-vector/20240920/ourmid/pngtree-construction-equipment-png-image_13880417.png" 
                 class="w-20 h-20 object-contain relative z-10 animate-float-icon-delayed transition-transform duration-500 group-hover:scale-110 group-hover:rotate-6 drop-shadow-lg" 
                 alt="Mason">
        </div>
        <span class="text-sm font-bold text-center text-gray-700 dark:text-gray-300 group-hover:text-black dark:group-hover:text-white transition-colors">Mason</span>
    </div>

    <div class="flex flex-col items-center gap-3 cursor-pointer group min-w-[90px]" onclick="openDrawer('wager')">
        <div class="relative w-24 h-24 flex items-center justify-center">
            <div class="absolute inset-0 bg-yellow-100 dark:bg-yellow-900/30 rounded-full scale-90 group-hover:scale-100 transition-transform duration-500 ease-out"></div>
            <div class="absolute inset-0 bg-yellow-200 dark:bg-yellow-800/20 rounded-full scale-75 opacity-0 group-hover:animate-ping-slow"></div>
            
            <img src="https://png.pngtree.com/png-clipart/20241018/original/pngtree-man-bulider-worker-icon-on-the-transparent-background-png-image_16386815.png" 
                 class="w-20 h-20 object-contain relative z-10 animate-float-icon transition-transform duration-500 group-hover:scale-110 group-hover:-rotate-3 drop-shadow-lg" 
                 alt="Wager">
        </div>
        <span class="text-sm font-bold text-center text-gray-700 dark:text-gray-300 group-hover:text-black dark:group-hover:text-white transition-colors">Wager<br><span class="text-[10px] font-normal text-gray-400">Siththaal</span></span>
    </div>

</section>
        <!-- SECTION: OFFERS -->
     <section class="slider-container relative scroll-trigger">
            <div class="flex justify-between items-end mb-4">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Offers & discounts</h2>
                <div class="flex gap-2">
                    <button onclick="scrollSlider('offers-slider', -1)" class="w-8 h-8 rounded-full border border-gray-200 dark:border-slate-700 dark:text-gray-400 flex items-center justify-center hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black transition-colors"><i data-lucide="chevron-left" class="w-4 h-4"></i></button>
                    <button onclick="scrollSlider('offers-slider', 1)" class="w-8 h-8 rounded-full border border-gray-200 dark:border-slate-700 dark:text-gray-400 flex items-center justify-center hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black transition-colors"><i data-lucide="chevron-right" class="w-4 h-4"></i></button>
                </div>
            </div>

            <div id="offers-slider" class="flex gap-5 overflow-x-auto hide-scroll p-4 snap-x scroll-smooth">
                
                <div onclick="scrollToSection('hardware-slider')" class="snap-start shrink-0 w-[300px] md:w-[400px] h-[220px] bg-[#2A2A2A] dark:bg-black rounded-2xl p-6 flex flex-col justify-between relative overflow-hidden pop-card hover:shadow-hover cursor-pointer text-white group border border-transparent dark:border-gray-800">
                    <div class="relative z-10">
                        <div class="text-xs font-bold uppercase tracking-wider text-yellow-400 mb-1">Bulk Deal</div>
                        <h3 class="text-2xl font-bold leading-tight mb-2">Construction<br>Materials Sale</h3>
                        <p class="text-white/80 text-sm">Cement, Steel & Bricks</p>
                    </div>
                    <button class="relative z-10 bg-white text-black w-fit px-5 py-2.5 rounded-lg font-bold text-sm group-hover:bg-gray-200 transition-colors">Shop Now</button>
                    <img src="https://images.unsplash.com/photo-1518709268805-4e9042af9f23?w=600" class="absolute right-0 top-0 h-full w-2/3 object-cover opacity-60">
                </div>

                <div onclick="openDrawer('loadman')" class="snap-start shrink-0 w-[300px] md:w-[400px] h-[220px] bg-[#1e3a8a] dark:bg-[#172554] rounded-2xl p-6 flex flex-col justify-between relative overflow-hidden pop-card hover:shadow-hover cursor-pointer text-white group border border-transparent dark:border-gray-700">
                    <div class="relative z-10">
                        <span class="bg-blue-500 text-white text-[10px] font-bold px-2 py-0.5 rounded mb-2 inline-block">Flat 20% OFF</span>
                        <h3 class="text-2xl font-bold leading-tight mb-2">Expert Loadman<br>Services</h3>
                        <p class="text-white/80 text-sm">Shifting & Heavy Lifting</p>
                    </div>
                    <button class="relative z-10 bg-white text-black w-fit px-5 py-2.5 rounded-lg font-bold text-sm group-hover:bg-gray-200 transition-colors">Book Now</button>
                    <img src="https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=600" class="absolute right-0 top-0 h-full w-3/5 object-cover opacity-70">
                </div>

              <div onclick="openHireMap()" class="snap-start shrink-0 w-[300px] md:w-[400px] h-[220px] bg-[#8B5E55] dark:bg-[#5e3831] rounded-2xl p-6 flex flex-col justify-between relative overflow-hidden pop-card hover:shadow-hover cursor-pointer text-white group border border-transparent dark:border-gray-700">
    <div class="relative z-10">
        <h3 class="text-2xl font-bold leading-tight mb-2">Need Professional Workers<br>Then Hire Now</h3>
        <p class="text-white/80 text-sm">Pay after 100% satisfaction</p>
    </div>
    <button onclick="event.stopPropagation(); openHireMap()" class="relative z-10 bg-white text-black w-fit px-5 py-2.5 rounded-lg font-bold text-sm group-hover:bg-gray-200 transition-colors">Find Pros</button>
    <img src="https://images.unsplash.com/photo-1589939705384-5185137a7f0f?w=600" class="absolute right-0 top-0 h-full w-3/5 object-cover opacity-80">
</div>
            </div>
        </section>

        <!-- SECTION: ANIMATED GRID -->
        <section class="grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-6 scroll-trigger">

            <!-- CARD 1: MASONRY (REPLACED PAINTING) -->
            <div onclick="openDrawer('mason')" class="col-span-1 cursor-pointer group relative h-[280px] rounded-3xl bg-[#FEF2F2] dark:bg-slate-900 animated-card border border-red-100 dark:border-slate-800 p-6 flex flex-col justify-between overflow-hidden">
                <div class="z-10 relative">
                    <h3 class="text-2xl font-bold text-gray-900 dark:text-white">Masonry</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400 font-medium mt-1">Construction & Tiles</p>
                </div>
                <div class="absolute inset-0 pointer-events-none overflow-hidden rounded-3xl">
                    <svg class="w-full h-full" viewBox="0 0 200 200">
                        <defs>
                             <pattern id="brick-pattern" x="0" y="0" width="40" height="20" patternUnits="userSpaceOnUse">
                                <rect x="0" y="0" width="38" height="18" fill="#FECACA" rx="1" />
                            </pattern>
                        </defs>
                        <rect x="40" y="80" width="160" height="120" fill="url(#brick-pattern)" transform="rotate(-10 100 100)" opacity="0.6" />
                        
                        <g class="animate-trowel-move" style="transform-origin: center;">
                             <path d="M120 60 L140 100 L180 90 L160 50 Z" fill="#9CA3AF" stroke="#4B5563" stroke-width="2" />
                             <rect x="155" y="45" width="8" height="30" transform="rotate(-15 159 60)" fill="#78350F" />
                        </g>
                    </svg>
                </div>
                <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-red-200/50 dark:bg-red-900/30 rounded-full blur-2xl pointer-events-none"></div>
            </div>

            <!-- CARD 2: LOADMAN (REPLACED AC REPAIR) -->
            <div onclick="openDrawer('loadman')" class="col-span-1 cursor-pointer group relative h-[280px] rounded-3xl bg-[#EFF6FF] dark:bg-slate-900 animated-card border border-blue-100 dark:border-slate-800 p-6 flex flex-col justify-between overflow-hidden">
                <div class="z-10">
                    <h3 class="text-2xl font-bold text-gray-900 dark:text-white">Loadman</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400 font-medium mt-1">Heavy Lifting & Moving</p>
                </div>
                
                <div class="absolute bottom-8 right-8 z-10 animate-float">
                     <svg width="100" height="100" viewBox="0 0 100 100">
                         <!-- Box -->
                         <rect x="10" y="40" width="50" height="50" rx="4" fill="#60A5FA" stroke="#2563EB" stroke-width="2" />
                         <path d="M10 40 L35 25 L60 40" fill="#93C5FD" stroke="#2563EB" stroke-width="2" />
                         <path d="M60 40 L85 25 L60 10 L35 25" fill="#3B82F6" opacity="0.5" /> 
                         <!-- Box Stacked -->
                         <rect x="40" y="20" width="40" height="40" rx="4" fill="#3B82F6" stroke="#1D4ED8" stroke-width="2" />
                         <path d="M40 20 L60 10 L80 20" fill="#60A5FA" stroke="#1D4ED8" stroke-width="2"/>
                     </svg>
                </div>
                
                <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-blue-200/50 dark:bg-blue-900/30 rounded-full blur-2xl pointer-events-none"></div>
            </div>

            <!-- CARD 3: CLEANING (IMAGE-BASED ANIMATION - RESTORED & DARK MODE FIX) -->
            <div onclick="openDrawer('cleaning')" class="col-span-1 cursor-pointer group relative h-[280px] rounded-3xl bg-[#E8F5E9] dark:bg-slate-900 animated-card border border-green-100 dark:border-slate-800 p-6 flex flex-col justify-between">
                <div class="z-10">
                    <h3 class="text-2xl font-bold text-gray-900 dark:text-white">Cleaning</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400 font-medium mt-1">Deep clean & Spa</p>
                </div>
                <img src="https://cdn-icons-png.flaticon.com/512/995/995053.png" class="absolute bottom-4 right-4 w-24 h-24 opacity-80 z-10 animate-float dark:opacity-100 dark:brightness-0 dark:invert" alt="Spray">
                <div class="absolute bottom-24 right-20 w-4 h-4 text-yellow-400 animate-sparkle"></div>
                <div class="absolute bottom-10 right-32 w-3 h-3 text-yellow-400 animate-sparkle delay-100"></div>
            </div>

            <!-- CARD 4: HARDWARE STORE (PREMIUM TOOLS ANIMATION & RED GRADIENT BG) -->
          <div onclick="scrollToSection('hardware-slider')" class="col-span-1 cursor-pointer group relative h-[280px] rounded-3xl bg-gradient-to-br from-cyan-700 via-cyan-600 to-teal-700 dark:bg-none dark:bg-slate-900 animated-card p-6 flex flex-col justify-between text-white overflow-hidden dark:border dark:border-slate-800">
                <div class="z-10 relative">
                    <div class="bg-qc-yellow text-black text-[10px] font-bold px-2 py-1 rounded inline-block mb-2">STORE</div>
                    <h3 class="text-2xl font-bold">Hardware</h3>
                    <p class="text-sm text-white/80 font-medium mt-1">Tools & Materials</p>
                </div>
                
                <!-- SVG ANIMATION -->
                <div class="absolute inset-0 pointer-events-none rounded-3xl">
                    <svg class="w-full h-full" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="metal-grad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color: #d1d5db; stop-opacity: 1" />
                                <stop offset="50%" style="stop-color: #9ca3af; stop-opacity: 1" />
                                <stop offset="100%" style="stop-color: #6b7280; stop-opacity: 1" />
                            </linearGradient>
                            <linearGradient id="gold-handle" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color: #fbbf24; stop-opacity: 1" />
                                <stop offset="100%" style="stop-color: #d97706; stop-opacity: 1" />
                            </linearGradient>
                            <mask id="shine-mask">
                                <rect x="0" y="0" width="200" height="200" fill="white" />
                                <rect x="-100" y="-100" width="50" height="400" fill="black" transform="rotate(45)" class="animate-shine-slide">
                                </rect>
                            </mask>
                        </defs>

                        <g class="animate-float-gentle">
                             <!-- HAMMER -->
                            <g transform="translate(140, 100) rotate(45)">
                                <!-- Handle -->
                                <rect x="-5" y="0" width="10" height="60" rx="2" fill="url(#gold-handle)" />
                                <!-- Head -->
                                <path d="M-15 -10 L15 -10 L15 10 L-15 10 Z" fill="url(#metal-grad)" />
                                <rect x="15" y="-6" width="5" height="12" fill="#4b5563" /> <!-- Impact face -->
                                <path d="M-15 0 L-25 -5 L-25 5 Z" fill="url(#metal-grad)" /> <!-- Claw -->
                            </g>

                            <!-- WRENCH -->
                            <g transform="translate(60, 130)">
                                <!-- Body -->
                                <rect x="-5" y="0" width="10" height="50" rx="2" fill="url(#metal-grad)" />
                                <!-- Head (C-shape) -->
                                <path d="M-15 -15 A 15 15 0 1 1 15 -15 L 10 -5 L -10 -5 Z" fill="url(#metal-grad)" />
                                <!-- Nut (being turned) -->
                                <path d="M-8 -25 L8 -25 L12 -18 L8 -11 L-8 -11 L-12 -18 Z" fill="#e5e7eb" stroke="#9ca3af" />
                            </g>
                        </g>
                        
                        <!-- SPARKLES -->
                        <circle cx="160" cy="80" r="2" fill="white" class="animate-pulse" />
                        <circle cx="40" cy="110" r="1.5" fill="white" class="animate-pulse delay-75" />
                    </svg>
                </div>
            </div>

        </section>

        <!-- SECTION: HARDWARE SLIDER -->
        <section class="slider-container relative group scroll-trigger">
            <div class="flex justify-between items-end mb-6">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white">New and Noteworthy</h2>
                    <p class="text-gray-500 dark:text-gray-400 text-sm mt-1">Premium hardware & tools for your projects</p>
                </div>
                <button onclick="scrollToSection('hardware-slider')" class="text-sm font-bold text-gray-400 hover:text-black dark:hover:text-white transition-colors">See all</button>
            </div>
            <button onclick="scrollSlider('hardware-slider', -1)" class="slider-btn absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 w-12 h-12 bg-white dark:bg-slate-800 dark:border-slate-700 rounded-full shadow-lg z-20 flex items-center justify-center border border-gray-100 hover:scale-110 cursor-pointer">
                <i data-lucide="chevron-left" class="w-6 h-6 dark:text-white"></i>
            </button>
           <div id="hardware-slider" class="flex gap-6 overflow-x-auto hide-scroll pt-4 pb-8 snap-x scroll-pl-4 scroll-smooth">
                <!-- Javascript will populate this -->
            </div>
            <button onclick="scrollSlider('hardware-slider', 1)" class="slider-btn absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 w-12 h-12 bg-white dark:bg-slate-800 dark:border-slate-700 rounded-full shadow-lg z-20 flex items-center justify-center border border-gray-100 hover:scale-110 cursor-pointer">
                <i data-lucide="chevron-right" class="w-6 h-6 dark:text-white"></i>
            </button>
        </section>

        <!-- SECTION: CURATED FOR YOUR HOME -->
      <section class="scroll-trigger">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">Construct Your World</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 h-[500px]">
                
                <div class="md:col-span-2 relative rounded-3xl overflow-hidden group cursor-pointer" onclick="openDrawer('mason')">
                    <img src="https://images.unsplash.com/photo-1504307651254-35680f356dfd?auto=format&fit=crop&w=800&q=80" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"></div>
                    <div class="absolute bottom-8 left-8 text-white">
                        <div class="bg-qc-yellow text-black px-3 py-1 rounded-full text-xs font-bold inline-block mb-3">Essential</div>
                        <h3 class="text-3xl font-bold">Site Safety & Management</h3>
                        <p class="text-gray-200 mt-2">Professional gear and on-site supervision.</p>
                    </div>
                </div>

                <div class="grid grid-rows-2 gap-4">
                    
                    <div class="relative rounded-3xl overflow-hidden group cursor-pointer" onclick="openDrawer('loadman')">
                        <img src="https://images.unsplash.com/photo-1426927308491-6380b6a9936f?auto=format&fit=crop&w=600&q=80" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105">
                        <div class="absolute inset-0 bg-black/40 group-hover:bg-black/20 transition-colors"></div>
                        <div class="absolute bottom-6 left-6 text-white">
                            <h3 class="text-xl font-bold">Heavy Machinery</h3>
                        </div>
                    </div>

                    <div class="relative rounded-3xl overflow-hidden group cursor-pointer" onclick="openHireMap()">
                        <img src="https://images.pexels.com/photos/2219035/pexels-photo-2219035.jpeg?auto=compress&cs=tinysrgb&w=600" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105">
                        <div class="absolute inset-0 bg-black/40 group-hover:bg-black/20 transition-colors"></div>
                        <div class="absolute bottom-6 left-6 text-white">
                            <h3 class="text-xl font-bold">Expert Workforce</h3>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION: NATIVE BANNER -->
    <section class="relative w-full bg-[#1c1917] dark:bg-black rounded-2xl overflow-hidden flex flex-col md:flex-row text-white group cursor-pointer hover:shadow-2xl transition-shadow duration-300 scroll-trigger">
            
            <div class="p-8 md:p-12 md:w-5/12 z-20 relative flex flex-col justify-center">
                <div class="text-orange-500 font-bold tracking-wider text-xs uppercase mb-3">Bulk Orders Available</div>
                <div class="flex items-center gap-3 mb-2">
                    <span class="text-white/60 font-bold tracking-[0.2em] text-sm">CONSTRUCTION</span>
                </div>
                <h2 class="text-4xl md:text-5xl font-bold mb-4 drop-shadow-md leading-tight">Essential Sand<br><span class="text-gray-400 text-3xl">for your Building</span></h2>
                <p class="text-gray-400 text-lg mb-8">River Sand. M-Sand. P-Sand. High quality aggregates delivered instantly to your site.</p>
                <div class="flex gap-4">
                     <button onclick="openDrawer('loadman')" class="bg-white text-black px-8 py-3 rounded-lg font-bold hover:bg-gray-200 transition-transform hover:scale-105 shadow-lg">Order Load</button>
                </div>
            </div>
            
            <div class="relative w-full md:w-7/12 h-[350px] md:h-[450px] p-4">
                <div class="grid grid-cols-2 grid-rows-2 gap-3 h-full w-full">
                    
                    <div class="row-span-2 relative rounded-2xl overflow-hidden group-hover:scale-[1.02] transition-transform duration-500 border border-white/10">
                        <img src="https://media.istockphoto.com/id/1018166602/photo/rusovich-pours-sand-on-the-construction-site.jpg?s=612x612&w=0&k=20&c=879NpeguNA_eDDLOgf62jw5nY4KsZNFZEtORiyV3IEo=" class="w-full h-full object-cover">
                        <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/80 to-transparent p-4">
                            <span class="text-xs font-bold text-white">Manual Labor</span>
                        </div>
                    </div>

                    <div class="relative rounded-2xl overflow-hidden group-hover:scale-[1.02] transition-transform duration-500 delay-75 border border-white/10">
                        <img src="https://t3.ftcdn.net/jpg/10/40/36/26/240_F_1040362666_0hv4EN9XAaPyuLhH6c1oLQzmmaEzYbI6.jpg" class="w-full h-full object-cover">
                    </div>

                    <div class="relative rounded-2xl overflow-hidden group-hover:scale-[1.02] transition-transform duration-500 delay-100 border border-white/10">
                        <img src="https://t4.ftcdn.net/jpg/08/41/31/65/240_F_841316511_p9k11PR7MzBfYINqNanrOVvarTzQo9uF.jpg" class="w-full h-full object-cover">
                        <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/80 to-transparent p-4">
                            <span class="text-xs font-bold text-white">Fine Aggregate</span>
                        </div>
                    </div>

                </div>
            </div>
        </section>
<section class="w-full max-w-6xl mx-auto px-6 py-12 flex flex-col md:flex-row items-center justify-center gap-12 scroll-trigger">
    
    <div class="w-full md:w-1/2 flex justify-center md:justify-end">
        
        <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

       <lottie-player 
    id="scroll-lottie"
    src="construction.json" 
    background="transparent" 
    speed="1" 
    style="width: 100%; max-width: 350px; height: 350px;" 
    loop>
</lottie-player>
    </div>

    <div class="w-full md:w-1/2 text-center md:text-left">
        <h3 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4">
            "We shape our buildings;<br> 
            <span class="text-cyan-500">thereafter they shape us.</span>"
        </h3>
        <p class="text-gray-600 dark:text-gray-400 text-lg italic">
             Building the foundation for your future.
        </p>
    </div>

</section>

        <!-- SECTION: WHY CHOOSE US -->
        <section class="bg-gray-50 dark:bg-slate-900 rounded-3xl p-12 scroll-trigger">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-qc-black dark:text-white">Why choose Quick Construct?</h2>
                <p class="text-gray-500 dark:text-gray-400 mt-2">Trusted by thousands of homeowners across Chennai</p>
            </div>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
                <div class="text-center">
                    <div class="w-16 h-16 bg-white dark:bg-slate-800 rounded-2xl shadow-sm flex items-center justify-center mx-auto mb-4 text-qc-green">
                        <i data-lucide="users" class="w-8 h-8"></i>
                    </div>
                    <h3 class="text-3xl font-black text-gray-900 dark:text-white mb-1">1M+</h3>
                    <p class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide">Bookings</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-white dark:bg-slate-800 rounded-2xl shadow-sm flex items-center justify-center mx-auto mb-4 text-qc-yellow">
                        <i data-lucide="star" class="w-8 h-8 fill-current"></i>
                    </div>
                    <h3 class="text-3xl font-black text-gray-900 dark:text-white mb-1">4.8</h3>
                    <p class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide">Average Rating</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-white dark:bg-slate-800 rounded-2xl shadow-sm flex items-center justify-center mx-auto mb-4 text-blue-500">
                        <i data-lucide="shield-check" class="w-8 h-8"></i>
                    </div>
                    <h3 class="text-3xl font-black text-gray-900 dark:text-white mb-1">100%</h3>
                    <p class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide">Verified Pros</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-white dark:bg-slate-800 rounded-2xl shadow-sm flex items-center justify-center mx-auto mb-4 text-purple-500">
                        <i data-lucide="clock" class="w-8 h-8"></i>
                    </div>
                    <h3 class="text-3xl font-black text-gray-900 dark:text-white mb-1">60m</h3>
                    <p class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide">Arrival Time</p>
                </div>
            </div>
        </section>

        <!-- SECTION: SERVICES SLIDER -->
        <section class="slider-container relative group scroll-trigger">
            <div class="flex justify-between items-end mb-6">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Most Booked Services</h2>
                    <p class="text-gray-500 dark:text-gray-400 text-sm mt-1">Verified professionals for your home</p>
                </div>
            </div>
            <button onclick="scrollSlider('services-slider', -1)" class="slider-btn absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 w-12 h-12 bg-white dark:bg-slate-800 dark:border-slate-700 rounded-full shadow-lg z-20 flex items-center justify-center border border-gray-100 hover:scale-110 cursor-pointer">
                <i data-lucide="chevron-left" class="w-6 h-6 dark:text-white"></i>
            </button>
          <div id="services-slider" class="flex gap-4 overflow-x-auto hide-scroll pt-4 pb-8 snap-x scroll-smooth">
                <!-- Javascript populated -->
            </div>
            <button onclick="scrollSlider('services-slider', 1)" class="slider-btn absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 w-12 h-12 bg-white dark:bg-slate-800 dark:border-slate-700 rounded-full shadow-lg z-20 flex items-center justify-center border border-gray-100 hover:scale-110 cursor-pointer">
                <i data-lucide="chevron-right" class="w-6 h-6 dark:text-white"></i>
            </button>
        </section>
      
<section id="join-us-section" class="scroll-trigger py-4">
    <div class="text-center mb-12">
        <span class="text-orange-500 font-bold tracking-widest text-xs uppercase mb-2 block">JOIN US</span>
        <h2 class="text-4xl font-extrabold text-gray-900 dark:text-white mb-3">Want to Join us?</h2>
        <p class="text-gray-500 dark:text-gray-400">Partner and grow with Quick Construct</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        
        <div class="bg-white dark:bg-slate-900 rounded-3xl overflow-hidden border border-gray-100 dark:border-slate-800 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 group cursor-pointer relative">
            <div class="h-48 bg-orange-50 dark:bg-slate-800 relative overflow-hidden flex items-center justify-center">
                <svg viewBox="0 0 300 200" class="w-full h-full max-w-[280px] relative z-10">
                    <defs>
                        <linearGradient id="counterGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" stop-color="#FB923C" />
                            <stop offset="100%" stop-color="#EA580C" />
                        </linearGradient>
                    </defs>
                    <g transform="translate(40, 40)">
                        <rect x="0" y="0" width="80" height="90" fill="#FFF7ED" stroke="#FED7AA" stroke-width="2" rx="4" class="dark:fill-slate-700 dark:stroke-slate-600"/>
                        <path d="M5 30 L75 30 L65 35 L15 35 Z" fill="#FDBA74" opacity="0.6"/>
                        <path d="M5 60 L75 60 L65 65 L15 65 Z" fill="#FDBA74" opacity="0.6"/>
                        <rect x="20" y="10" width="10" height="15" fill="#EF4444" rx="2"/>
                        <rect x="40" y="12" width="15" height="12" fill="#3B82F6" rx="2"/>
                    </g>
                    <path d="M20 140 L280 140 L280 180 L20 180 Z" fill="url(#counterGrad)"/>
                    <rect x="15" y="135" width="270" height="10" rx="3" fill="#FDBA74"/>
                    <g transform="translate(150, 140)">
                        <path d="M-35 0 L-30 -55 Q-30 -70 0 -70 Q30 -70 30 -55 L35 0 Z" fill="#1F2937" class="dark:fill-slate-200"/>
                        <path d="M-20 -60 L-20 -10 L20 -10 L20 -60 Q0 -50 -20 -60" fill="#EA580C"/>
                        <g class="animate-float-gentle">
                            <path d="M-8 -65 L-8 -75 L8 -75 L8 -65" fill="#FDBA74"/>
                            <ellipse cx="0" cy="-90" rx="20" ry="22" fill="#FDBA74"/>
                            <path d="M-20 -95 Q0 -115 20 -95 Q20 -90 18 -88 Q0 -105 -18 -88 Z" fill="#111827"/>
                            <g class="animate-blink">
                                <circle cx="-6" cy="-92" r="2" fill="#1F2937"/>
                                <circle cx="6" cy="-92" r="2" fill="#1F2937"/>
                            </g>
                        </g>
                        <path d="M-30 -20 Q-45 -10 -50 0" stroke="#1F2937" stroke-width="10" stroke-linecap="round" class="dark:stroke-slate-200"/>
                        <circle cx="-50" cy="0" r="6" fill="#FDBA74"/>
                        <path d="M30 -20 Q45 -10 50 0" stroke="#1F2937" stroke-width="10" stroke-linecap="round" class="dark:stroke-slate-200"/>
                        <circle cx="50" cy="0" r="6" fill="#FDBA74"/>
                    </g>
                </svg>
            </div>
            <div class="p-6 text-center">
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">Sell with us</h3>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-4">List your hardware products.</p>
                <button class="text-orange-500 font-bold text-sm flex items-center justify-center gap-2 mx-auto group-hover:gap-3 transition-all">
                    Start Selling <i data-lucide="arrow-right" class="w-4 h-4"></i>
                </button>
            </div>
        </div>

        <div class="bg-white dark:bg-slate-900 rounded-3xl overflow-hidden border border-gray-100 dark:border-slate-800 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 group cursor-pointer relative scale-105 z-10 border-blue-100 dark:border-blue-900">
            <div class="h-48 bg-blue-50 dark:bg-slate-800 relative overflow-hidden flex items-center justify-center">
                <svg viewBox="0 0 300 200" class="w-full h-full max-w-[280px] relative z-10">
                    <circle cx="150" cy="100" r="85" fill="white" fill-opacity="0.6" class="dark:fill-slate-700"/>
                    <path d="M100 80 L200 80 M100 120 L200 120 M150 50 L150 150" stroke="#3B82F6" stroke-width="1" opacity="0.2"/>

                    <g transform="translate(150, 190)" class="animate-breathe">
                        
                        <path d="M-30 0 L-25 -80 L25 -80 L30 0" fill="#1E3A8A"/> 
                        
                        <path d="M-35 -70 L-32 -130 Q-32 -140 0 -140 Q32 -140 32 -130 L35 -70 Z" fill="#60A5FA"/>
                        
                        <path d="M-35 -130 L-35 -70 L-10 -70 L-10 -130 L-35 -130" fill="#F59E0B"/> <path d="M35 -130 L35 -70 L10 -70 L10 -130 L35 -130" fill="#F59E0B"/> <rect x="-35" y="-110" width="25" height="8" fill="#D1D5DB" opacity="0.8"/>
                        <rect x="10" y="-110" width="25" height="8" fill="#D1D5DB" opacity="0.8"/>
                        
                        <rect x="-40" y="-75" width="80" height="18" rx="4" fill="#78350F"/>
                        <rect x="-5" y="-78" width="10" height="24" rx="2" fill="#92400E"/> <rect x="-25" y="-70" width="6" height="20" fill="#9CA3AF" transform="rotate(15)"/>
                        
                        <g transform="translate(0, -140)">
                            <path d="M-10 0 L-10 15 L10 15 L10 0" fill="#FDBA74"/> <path d="M-22 -5 Q-25 -35 0 -35 Q25 -35 22 -5 Q22 10 0 10 Q-22 10 -22 -5 Z" fill="#FDBA74"/> <path d="M-26 -25 Q0 -50 26 -25 L26 -20 Q0 -30 -26 -20 Z" fill="#F59E0B"/> <path d="M-28 -20 Q0 -12 28 -20" stroke="#D97706" stroke-width="4" stroke-linecap="round" fill="none"/> <path d="M-10 -35 Q-5 -40 5 -35" stroke="white" stroke-width="2" opacity="0.4" fill="none"/> <path d="M-2 -5 L2 -5 L0 -2 Z" fill="#CA8A04"/> <g class="animate-blink">
                                <circle cx="-8" cy="-12" r="2.5" fill="#1F2937"/>
                                <circle cx="8" cy="-12" r="2.5" fill="#1F2937"/>
                            </g>
                            <path d="M-5 2 Q0 5 5 2" stroke="#92400E" stroke-width="1.5" fill="none"/> </g>

                        <g transform="translate(38, -110)">
                            <path d="M-5 0 Q10 20 5 35" stroke="#60A5FA" stroke-width="14" stroke-linecap="round"/>
                            <circle cx="5" cy="35" r="8" fill="#FDBA74"/>
                            
                            <g transform="translate(5, 25) rotate(-10)">
                                <g class="animate-pulse-fast">
                                    <path d="M-6 -8 L22 -8 L22 10 L6 10 L6 22 L-6 22 Z" fill="#374151"/> <rect x="22" y="-4" width="8" height="10" fill="#9CA3AF"/> <rect x="30" y="-1" width="14" height="4" fill="#D1D5DB" stroke="#6B7280" stroke-width="1" stroke-dasharray="2 1" class="animate-spin-bit"/>
                                </g>
                            </g>
                        </g>

                        <g transform="translate(-38, -110)">
                            <path d="M5 0 Q-10 20 -5 35" stroke="#60A5FA" stroke-width="14" stroke-linecap="round"/>
                            <circle cx="-5" cy="35" r="8" fill="#FDBA74"/>
                        </g>

                    </g>
                </svg>
            </div>
            <div class="p-6 text-center">
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">Join as Professional</h3>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-4">Get daily bookings & insurance.</p>
                <button class="text-blue-600 font-bold text-sm flex items-center justify-center gap-2 mx-auto group-hover:gap-3 transition-all">
                    Join Now <i data-lucide="arrow-right" class="w-4 h-4"></i>
                </button>
            </div>
        </div>

        <div class="bg-white dark:bg-slate-900 rounded-3xl overflow-hidden border border-gray-100 dark:border-slate-800 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 group cursor-pointer relative">
            <div class="h-48 bg-green-50 dark:bg-slate-800 relative overflow-hidden flex items-center justify-center">
                <svg viewBox="0 0 300 200" class="w-full h-full max-w-[280px] relative z-10">
                    <defs>
                        <clipPath id="roadClip">
                            <rect x="0" y="160" width="300" height="40"/>
                        </clipPath>
                    </defs>
                    <g clip-path="url(#roadClip)">
                        <rect x="0" y="160" width="300" height="40" fill="#E2E8F0" class="dark:fill-slate-700"/>
                        <g class="animate-road-move">
                            <rect x="0" y="178" width="50" height="4" fill="#94A3B8"/>
                            <rect x="100" y="178" width="50" height="4" fill="#94A3B8"/>
                            <rect x="200" y="178" width="50" height="4" fill="#94A3B8"/>
                            <rect x="300" y="178" width="50" height="4" fill="#94A3B8"/> 
                        </g>
                    </g>
                    <g transform="translate(60, 90)">
                        <g style="animation: car-bounce 0.8s ease-in-out infinite alternate;">
                            <path d="M10 50 L15 30 Q30 10 60 10 L120 10 Q150 10 170 30 L180 50 L180 70 L10 70 Z" 
                                  fill="#16A34A" stroke="#14532D" stroke-width="1"/>
                            <path d="M60 15 L110 15 L110 35 L50 35 Z" fill="#1F2937" opacity="0.4"/>
                            <path d="M115 15 L145 18 L160 35 L115 35 Z" fill="#1F2937" opacity="0.4"/>
                            <g transform="translate(75, 20)">
                                <circle cx="0" cy="0" r="8" fill="#1F2937"/>
                                <path d="M0 8 Q10 15 20 10" stroke="#1F2937" stroke-width="4" fill="none"/>
                            </g>
                            <path d="M175 50 L178 50 Q180 50 180 60 L175 60 Z" fill="#FBBF24"/>
                            <path d="M10 50 L12 50 L12 60 L10 60 Z" fill="#EF4444"/>
                        </g>
                        <g transform="translate(48, 70)">
                            <g class="animate-spin-fast">
                                <circle cx="0" cy="0" r="14" fill="#1F2937" stroke="#374151" stroke-width="3"/>
                                <circle cx="0" cy="0" r="8" fill="#9CA3AF"/>
                                <rect x="-2" y="-8" width="4" height="16" fill="#374151"/>
                                <rect x="-8" y="-2" width="16" height="4" fill="#374151"/>
                            </g>
                        </g>
                        <g transform="translate(142, 70)">
                             <g class="animate-spin-fast">
                                <circle cx="0" cy="0" r="14" fill="#1F2937" stroke="#374151" stroke-width="3"/>
                                <circle cx="0" cy="0" r="8" fill="#9CA3AF"/>
                                <rect x="-2" y="-8" width="4" height="16" fill="#374151"/>
                                <rect x="-8" y="-2" width="16" height="4" fill="#374151"/>
                            </g>
                        </g>
                    </g>
                </svg>
            </div>
            <div class="p-6 text-center">
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">Drive & Earn</h3>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-4">Deliver tools with your bike/car.</p>
                <button class="text-green-600 font-bold text-sm flex items-center justify-center gap-2 mx-auto group-hover:gap-3 transition-all">
                    Register <i data-lucide="arrow-right" class="w-4 h-4"></i>
                </button>
            </div>
        </div>

    </div>
</section>

<style>
    /* --- CRANE ANIMATION --- */

/* 1. Initial Lift Entrance (Button drops in) */
#crane-wrapper {
    animation: crane-lower-in 2s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards, 
               crane-sway 6s ease-in-out infinite 2s; /* Starts swaying after 2s */
}

/* Slide down animation */
@keyframes crane-lower-in {
    0% { transform: translateY(-200px); }
    100% { transform: translateY(0); }
}

/* Gentle hanging sway animation */
@keyframes crane-sway {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(2deg); }
    75% { transform: rotate(-2deg); }
}

/* Hover Effect: Stop swinging when user tries to click */
#crane-wrapper:hover {
    animation-play-state: paused;
}
/* Road Loop */
@keyframes road-move {
    0% { transform: translateX(0); }
    100% { transform: translateX(-100px); } 
}
.animate-road-move {
    animation: road-move 0.6s linear infinite;
}

/* Wheel Spin */
@keyframes spin-fast {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}
.animate-spin-fast {
    animation: spin-fast 0.5s linear infinite;
}

/* Drill Bit Spin - shifts the dash array to look like spinning */
@keyframes spin-bit {
    0% { stroke-dashoffset: 0; }
    100% { stroke-dashoffset: 6; }
}
.animate-spin-bit {
    animation: spin-bit 0.2s linear infinite;
}

/* Breathing Effect (Worker) */
@keyframes breathe {
    0%, 100% { transform: translate(150px, 190px) scaleY(1); }
    50% { transform: translate(150px, 189px) scaleY(1.005); }
}
.animate-breathe {
    animation: breathe 3s ease-in-out infinite;
}

/* Car Bounce */
@keyframes car-bounce {
    0% { transform: translateY(0); }
    100% { transform: translateY(-2px); }
}

/* Drill Vibration */
@keyframes pulse-fast {
    0%, 100% { transform: translate(0, 0) rotate(0deg); }
    50% { transform: translate(1px, 1px) rotate(1deg); }
}
.animate-pulse-fast {
    animation: pulse-fast 0.1s linear infinite;
}

/* Eye Blinking */
@keyframes blink {
    0%, 90%, 100% { opacity: 1; transform: scaleY(1); }
    95% { opacity: 0.5; transform: scaleY(0.1); }
}
.animate-blink {
    animation: blink 4s infinite;
}
/* Smooth Floating Animation for Icons */
@keyframes float-icon {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-6px); }
}

.animate-float-icon {
    animation: float-icon 3s ease-in-out infinite;
}

.animate-float-icon-delayed {
    animation: float-icon 3s ease-in-out infinite;
    animation-delay: 1.5s; /* Delays the second icon so they don't move exactly together */
}

/* Subtle Ping Effect on Hover */
@keyframes ping-slow {
    75%, 100% {
        transform: scale(1.5);
        opacity: 0;
    }
}
.animate-ping-slow {
    animation: ping-slow 2s cubic-bezier(0, 0, 0.2, 1) infinite;
}
</style>
    </main>
    <section class="w-full py-20 overflow-hidden relative scroll-trigger">
    <div class="max-w-7xl mx-auto px-6 flex flex-col md:flex-row items-center gap-16">
        
        <div class="w-full md:w-1/2 z-10">
            <span class="text-qc-yellow font-bold tracking-widest text-xs uppercase mb-2 block">MOBILE EXPERIENCE</span>
            <h2 class="text-4xl md:text-5xl font-extrabold text-gray-900 dark:text-white mb-6 leading-tight">
                Your Construction Site,<br>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-cyan-500">In Your Pocket.</span>
            </h2>
            <p class="text-lg text-gray-500 dark:text-gray-400 mb-8 leading-relaxed">
                Track workers live, order cement in seconds, and manage your entire project from anywhere. Download the Quick Construct app today.
            </p>
            
            
            
            <div class="mt-10 flex items-center gap-6 text-gray-500 dark:text-gray-400 text-sm font-bold">
                <div class="flex items-center gap-2">
                    <i data-lucide="shield-check" class="w-5 h-5 text-green-500"></i> Secure Payments
                </div>
                <div class="flex items-center gap-2">
                    <i data-lucide="map-pin" class="w-5 h-5 text-blue-500"></i> Live Tracking
                </div>
            </div>
        </div>

        <div class="w-full md:w-1/2 flex justify-center relative">
            
            <div class="absolute inset-0 bg-gradient-to-tr from-cyan-200/40 to-blue-200/40 dark:from-blue-900/20 dark:to-cyan-900/20 blur-3xl rounded-full z-0"></div>

            <div class="relative z-10 w-[300px] h-[600px] bg-gray-900 rounded-[3rem] p-3 shadow-2xl border-4 border-gray-800 ring-1 ring-gray-700 transform rotate-[-5deg] hover:rotate-0 transition-transform duration-500 ease-out">
                
                <div class="absolute top-24 -left-[6px] w-[6px] h-8 bg-gray-800 rounded-l-md"></div>
                <div class="absolute top-36 -left-[6px] w-[6px] h-14 bg-gray-800 rounded-l-md"></div>
                <div class="absolute top-52 -left-[6px] w-[6px] h-14 bg-gray-800 rounded-l-md"></div>
                <div class="absolute top-36 -right-[6px] w-[6px] h-20 bg-gray-800 rounded-r-md"></div>

                <div class="w-full h-full bg-gray-50 dark:bg-slate-800 rounded-[2.5rem] overflow-hidden relative border border-gray-900/50">
                    
                    <div class="absolute top-0 left-1/2 -translate-x-1/2 w-32 h-7 bg-gray-900 rounded-b-xl z-30 flex items-center justify-center gap-2">
                        <div class="w-10 h-1 bg-gray-800 rounded-full"></div>
                        <div class="w-1 h-1 bg-blue-900 rounded-full"></div>
                    </div>

                    <div class="absolute top-2 left-6 text-[10px] font-bold text-black dark:text-white z-20">9:41</div>
                    <div class="absolute top-2 right-6 flex gap-1 z-20">
                         <div class="w-3 h-3 bg-black dark:bg-white rounded-sm opacity-80"></div>
                         <div class="w-3 h-3 bg-black dark:bg-white rounded-full opacity-80"></div>
                    </div>

                    <div class="animate-phone-scroll w-full">
                        
                        <div class="p-6 pt-12 pb-4 bg-white dark:bg-slate-900 shadow-sm mb-4">
                            <div class="flex justify-between items-center mb-4">
                                <div>
                                    <div class="text-xs text-gray-400 font-bold">Good Morning,</div>
                                    <h3 class="text-xl font-black text-gray-900 dark:text-white">John Doe</h3>
                                </div>
                                <div class="w-10 h-10 bg-qc-yellow rounded-full flex items-center justify-center font-bold text-black shadow-lg">JD</div>
                            </div>
                            <div class="bg-gray-100 dark:bg-slate-800 h-10 rounded-lg w-full flex items-center px-3 gap-2">
                                <div class="w-4 h-4 bg-gray-300 rounded-full"></div>
                                <div class="h-2 bg-gray-300 w-24 rounded-full"></div>
                            </div>
                        </div>

                        <div class="px-4 space-y-3 pb-8">
                            
                            <div class="h-32 bg-blue-600 rounded-2xl p-4 text-white relative overflow-hidden flex flex-col justify-center">
                                <div class="font-bold text-lg relative z-10">20% OFF</div>
                                <div class="text-xs opacity-80 relative z-10">On Heavy Machinery</div>
                                <div class="absolute right-[-20px] bottom-[-20px] w-24 h-24 bg-white/20 rounded-full"></div>
                            </div>

                            <div class="flex justify-between px-2">
                                <div class="flex flex-col items-center gap-1">
                                    <div class="w-12 h-12 bg-red-100 rounded-full"></div>
                                    <div class="w-8 h-2 bg-gray-200 rounded-full"></div>
                                </div>
                                <div class="flex flex-col items-center gap-1">
                                    <div class="w-12 h-12 bg-blue-100 rounded-full"></div>
                                    <div class="w-8 h-2 bg-gray-200 rounded-full"></div>
                                </div>
                                <div class="flex flex-col items-center gap-1">
                                    <div class="w-12 h-12 bg-green-100 rounded-full"></div>
                                    <div class="w-8 h-2 bg-gray-200 rounded-full"></div>
                                </div>
                                <div class="flex flex-col items-center gap-1">
                                    <div class="w-12 h-12 bg-yellow-100 rounded-full"></div>
                                    <div class="w-8 h-2 bg-gray-200 rounded-full"></div>
                                </div>
                            </div>

                            <div class="p-3 bg-white dark:bg-slate-900 rounded-xl shadow-sm flex gap-3 items-center">
                                <div class="w-12 h-12 bg-gray-200 rounded-lg"></div>
                                <div class="flex-1 space-y-2">
                                    <div class="w-3/4 h-3 bg-gray-800 dark:bg-white rounded-full"></div>
                                    <div class="w-1/2 h-2 bg-gray-300 rounded-full"></div>
                                </div>
                            </div>
                            <div class="p-3 bg-white dark:bg-slate-900 rounded-xl shadow-sm flex gap-3 items-center">
                                <div class="w-12 h-12 bg-gray-200 rounded-lg"></div>
                                <div class="flex-1 space-y-2">
                                    <div class="w-2/3 h-3 bg-gray-800 dark:bg-white rounded-full"></div>
                                    <div class="w-1/2 h-2 bg-gray-300 rounded-full"></div>
                                </div>
                            </div>
                             <div class="p-3 bg-white dark:bg-slate-900 rounded-xl shadow-sm flex gap-3 items-center">
                                <div class="w-12 h-12 bg-gray-200 rounded-lg"></div>
                                <div class="flex-1 space-y-2">
                                    <div class="w-3/4 h-3 bg-gray-800 dark:bg-white rounded-full"></div>
                                    <div class="w-1/4 h-2 bg-gray-300 rounded-full"></div>
                                </div>
                            </div>
                             <div class="h-24 bg-purple-600 rounded-2xl p-4 text-white mt-2">
                                <div class="w-1/2 h-4 bg-white/40 rounded-full mb-2"></div>
                                <div class="w-1/3 h-2 bg-white/40 rounded-full"></div>
                            </div>
                             <div class="p-3 bg-white dark:bg-slate-900 rounded-xl shadow-sm flex gap-3 items-center opacity-50">
                                <div class="w-12 h-12 bg-gray-200 rounded-lg"></div>
                                <div class="flex-1 space-y-2">
                                    <div class="w-3/4 h-3 bg-gray-800 dark:bg-white rounded-full"></div>
                                    <div class="w-1/2 h-2 bg-gray-300 rounded-full"></div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="absolute bottom-0 left-0 w-full h-16 bg-white dark:bg-slate-900 border-t border-gray-100 dark:border-slate-800 flex justify-around items-center px-4 z-30">
                        <div class="w-6 h-6 bg-qc-yellow rounded-full"></div>
                        <div class="w-6 h-6 bg-gray-200 rounded-full"></div>
                        <div class="w-6 h-6 bg-gray-200 rounded-full"></div>
                        <div class="w-6 h-6 bg-gray-200 rounded-full"></div>
                    </div>
                    
                    <div class="absolute bottom-2 left-1/2 -translate-x-1/2 w-32 h-1 bg-black dark:bg-white rounded-full z-40"></div>

                </div>
            </div>
            
            <div class="absolute top-1/2 right-0 -translate-y-1/2 translate-x-1/4 animate-float">
                <div class="bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-xl flex items-center gap-3">
                    <div class="bg-green-100 p-2 rounded-full text-green-600"><i data-lucide="check" class="w-4 h-4"></i></div>
                    <div>
                        <div class="text-xs font-bold text-gray-400">Status</div>
                        <div class="text-sm font-bold text-black dark:text-white">Order Delivered</div>
                    </div>
                </div>
            </div>

             <div class="absolute bottom-20 left-0 -translate-x-10 animate-float-gentle" style="animation-delay: 1s;">
                <div class="bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-xl flex items-center gap-3">
                    <div class="bg-yellow-100 p-2 rounded-full text-yellow-600"><i data-lucide="star" class="w-4 h-4 fill-current"></i></div>
                    <div>
                        <div class="text-xs font-bold text-gray-400">Rating</div>
                        <div class="text-sm font-bold text-black dark:text-white">4.9 Stars</div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>

    <!-- ================= FOOTER ================= -->
    <footer class="bg-gray-50 dark:bg-slate-900 border-t border-gray-200 dark:border-slate-800 pt-16 pb-8">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-start gap-12 mb-16">
                <div class="max-w-xs">
                    <div class="flex items-center gap-2 mb-6">
                        <div class="w-8 h-8 bg-gradient-to-br from-cyan-400 via-cyan-500 to-blue-500 rounded flex items-center justify-center text-black font-black text-sm">QC</div>
                        <span class="font-bold text-lg dark:text-white">Quick Construct</span>
                    </div>
                    <p class="text-gray-500 dark:text-gray-400 text-sm leading-relaxed">The all-in-one platform for home construction, renovation services, and professional grade hardware.</p>
                    
                    <!-- APP STORE BADGES -->
                    <div class="mt-8">
                        <p class="font-bold text-sm mb-3 dark:text-white">Experience the mobile app</p>
                        <div class="flex gap-3">
                           <a href="#" class="block hover:scale-105 transition-transform">
                               <img src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg" class="h-10">
                           </a>
                           <a href="#" class="block hover:scale-105 transition-transform">
                               <img src="https://upload.wikimedia.org/wikipedia/commons/3/3c/Download_on_the_App_Store_Badge.svg" class="h-10">
                           </a>
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-16">
                    <div>
                        <h4 class="font-bold mb-4 text-black dark:text-white">Company</h4>
                        <ul class="space-y-3 text-sm text-gray-500 dark:text-gray-400">
                            <li><a href="#" class="hover:text-black dark:hover:text-white">About us</a></li>
                            <li><a href="#" class="hover:text-black dark:hover:text-white">Terms & conditions</a></li>
                            <li><a href="#" class="hover:text-black dark:hover:text-white">Privacy policy</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-bold mb-4 text-black dark:text-white">Services</h4>
                        <ul class="space-y-3 text-sm text-gray-500 dark:text-gray-400">
                            <li><a href="#" onclick="openDrawer('ac')" class="hover:text-black dark:hover:text-white">AC Repair</a></li>
                            <li><a href="#" class="hover:text-black dark:hover:text-white">Carpentry</a></li>
                            <li><a href="#" class="hover:text-black dark:hover:text-white">Plumbing</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-bold mb-4 text-black dark:text-white">Store</h4>
                        <ul class="space-y-3 text-sm text-gray-500 dark:text-gray-400">
                            <li><a href="#" onclick="scrollToSection('hardware-slider')" class="hover:text-black dark:hover:text-white">Tools</a></li>
                            <li><a href="#" onclick="scrollToSection('hardware-slider')" class="hover:text-black dark:hover:text-white">Materials</a></li>
                            <li><a href="#" class="hover:text-black dark:hover:text-white">Sell with us</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-200 dark:border-slate-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-4">
                <p class="text-xs text-gray-400"> 2025 Quick Construct Technologies.</p>
                <div class="flex gap-4">
                    <i data-lucide="instagram" class="w-5 h-5 text-gray-400 hover:text-black dark:hover:text-white cursor-pointer"></i>
                    <i data-lucide="twitter" class="w-5 h-5 text-gray-400 hover:text-black dark:hover:text-white cursor-pointer"></i>
                </div>
            </div>
        </div>
    </footer>

    <!-- ================= MODALS & DRAWERS ================= -->
    
    <!-- NEW: HIRE PROS MAP INTERFACE -->
    <div id="hire-map-overlay" class="fixed inset-0 z-[200] bg-white dark:bg-slate-900 hidden flex flex-col md:flex-row">
        
        <!-- Left Sidebar (Categories) -->
        <div class="order-2 md:order-1 h-2/5 md:h-full w-full md:w-1/3 border-t md:border-t-0 md:border-r border-gray-200 dark:border-slate-800 bg-white dark:bg-slate-900 flex flex-col shadow-2xl z-20">
            <!-- Header -->
            <div class="p-4 border-b border-gray-100 dark:border-slate-800 flex justify-between items-center">
                <h3 class="text-lg font-bold flex items-center gap-2 dark:text-white">
                    <span class="w-8 h-8 bg-qc-yellow rounded-lg flex items-center justify-center text-black"><i data-lucide="map" class="w-4 h-4"></i></span>
                    Find Professionals
                </h3>
                <button onclick="closeHireMap()" class="p-2 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-full transition-colors"><i data-lucide="x" class="w-5 h-5 text-gray-500 dark:text-gray-400"></i></button>
            </div>
            
            <!-- Category List -->
            <div class="flex-1 overflow-y-auto p-4 space-y-3" id="map-category-list">
                <!-- Injected via JS -->
            </div>

            <!-- Footer Status -->
            <div class="p-4 border-t border-gray-100 dark:border-slate-800 text-xs text-center text-gray-400">
                <p>Map updates in real-time. Showing professionals within 5km.</p>
            </div>
        </div>

        <!-- Right Map Area -->
        <div class="order-1 md:order-2 flex-1 relative bg-gray-100 dark:bg-slate-800 overflow-hidden relative group h-3/5 md:h-full">
            <!-- Leaflet Map Container -->
            <div id="leaflet-map" class="w-full h-full z-0"></div>
            
            <!-- Map Overlay Controls -->
            <div class="absolute top-4 left-1/2 -translate-x-1/2 bg-white/90 dark:bg-slate-900/90 backdrop-blur px-4 py-2 rounded-full shadow-lg z-[400] flex items-center gap-2 text-sm font-bold border border-gray-200 dark:border-slate-700">
                <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                <span class="dark:text-white" id="map-status-text">Searching for pros...</span>
            </div>

            <button onclick="recenterMap()" class="absolute bottom-4 right-4 bg-white dark:bg-slate-800 p-3 rounded-full shadow-xl z-[400] border border-gray-100 dark:border-slate-700 hover:scale-105 transition-transform">
                <i data-lucide="crosshair" class="w-5 h-5 text-blue-600 dark:text-blue-400"></i>
            </button>
        </div>
    </div>

    <!-- Location Modal -->
    <div id="location-modal" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-black/60 modal-overlay backdrop-blur-sm" onclick="closeModal('location-modal')"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl p-6 modal-content scale-95 opacity-0">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold dark:text-white">Select Location</h3>
                <button onclick="closeModal('location-modal')"><i data-lucide="x" class="w-6 h-6 text-gray-400"></i></button>
            </div>
            <div class="relative mb-4">
                <i data-lucide="search" class="absolute left-3 top-3 w-5 h-5 text-gray-400"></i>
                <input type="text" placeholder="Search for area, street name..." class="w-full bg-gray-100 dark:bg-slate-800 dark:text-white rounded-lg py-3 pl-10 pr-4 font-medium focus:outline-none focus:ring-2 focus:ring-black dark:focus:ring-white">
            </div>
            <button onclick="useCurrentLocation()" class="w-full flex items-center gap-3 p-4 hover:bg-gray-50 dark:hover:bg-slate-800 rounded-xl transition-colors text-left group">
                <div class="w-10 h-10 bg-gray-100 dark:bg-slate-800 rounded-full flex items-center justify-center text-qc-yellow group-hover:bg-white dark:group-hover:bg-slate-700 group-hover:shadow-md transition-all"><i data-lucide="crosshair" class="w-5 h-5"></i></div>
                <div>
                    <div class="font-bold text-black dark:text-white group-hover:text-qc-yellow transition-colors">Use Current Location</div>
                    <div class="text-xs text-gray-400" id="loc-status">Using GPS</div>
                </div>
            </button>
        </div>
    </div>

    <!-- Login Modal -->
  <div id="login-modal" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-black/60 modal-overlay backdrop-blur-sm" onclick="closeModal('login-modal')"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-slate-900 w-full max-w-sm rounded-2xl shadow-2xl p-8 modal-content scale-95 opacity-0 text-center relative overflow-hidden">
            <button onclick="closeModal('login-modal')" class="absolute top-4 right-4 text-gray-400 hover:text-black dark:hover:text-white"><i data-lucide="x" class="w-6 h-6"></i></button>
            
            <div id="login-step-1" class="transition-transform duration-300">
                <h2 class="text-2xl font-bold mb-2 dark:text-white">Login / Sign up</h2>
                <p class="text-gray-500 text-sm mb-6 dark:text-gray-400">Enter your number to continue</p>
                <div class="flex border border-gray-300 dark:border-slate-700 rounded-lg overflow-hidden mb-4 focus-within:border-black dark:focus-within:border-white focus-within:ring-1 focus-within:ring-black dark:focus-within:ring-white transition-all">
                    <div class="bg-gray-50 dark:bg-slate-800 px-3 py-3 border-r border-gray-300 dark:border-slate-700 font-bold text-gray-600 dark:text-gray-300 flex items-center gap-1">
                        <img src="https://flagcdn.com/w20/in.png" class="w-5"> +91
                    </div>
                    <input type="tel" id="login-phone" placeholder="Enter mobile number" class="flex-1 px-4 py-3 outline-none font-medium dark:bg-slate-900 dark:text-white" maxlength="10">
                </div>
                <button onclick="sendOtp()" class="w-full bg-black dark:bg-white text-white dark:text-black py-3 rounded-lg font-bold shadow-lg hover:shadow-xl hover:bg-gray-800 dark:hover:bg-gray-200 transition-all">Continue</button>
            </div>

            <div id="login-step-2" class="hidden translate-x-full transition-transform duration-300">
                <button onclick="backToPhone()" class="absolute top-4 left-4 text-gray-400 hover:text-black dark:hover:text-white"><i data-lucide="arrow-left" class="w-6 h-6"></i></button>
                <h2 class="text-2xl font-bold mb-2 dark:text-white">Verification</h2>
                <p class="text-gray-500 text-sm mb-6 dark:text-gray-400">We sent an OTP to <span id="otp-phone-display" class="font-bold text-black dark:text-white"></span></p>
                <div class="flex justify-center gap-2 mb-6">
                    <input type="text" class="w-12 h-12 border border-gray-300 dark:border-slate-700 rounded-lg text-center text-xl font-bold outline-none focus:border-black dark:bg-slate-800 dark:text-white otp-input" maxlength="1">
                    <input type="text" class="w-12 h-12 border border-gray-300 dark:border-slate-700 rounded-lg text-center text-xl font-bold outline-none focus:border-black dark:bg-slate-800 dark:text-white otp-input" maxlength="1">
                    <input type="text" class="w-12 h-12 border border-gray-300 dark:border-slate-700 rounded-lg text-center text-xl font-bold outline-none focus:border-black dark:bg-slate-800 dark:text-white otp-input" maxlength="1">
                    <input type="text" class="w-12 h-12 border border-gray-300 dark:border-slate-700 rounded-lg text-center text-xl font-bold outline-none focus:border-black dark:bg-slate-800 dark:text-white otp-input" maxlength="1">
                </div>
                <button onclick="verifyOtp()" class="w-full bg-black dark:bg-white text-white dark:text-black py-3 rounded-lg font-bold shadow-lg hover:shadow-xl hover:bg-gray-800 dark:hover:bg-gray-200 transition-all">Login</button>
                <p class="text-xs text-gray-400 mt-4">Demo OTP: Any 4 digits</p>
            </div>

            <div id="login-step-3" class="hidden translate-x-full transition-transform duration-300">
                <h2 class="text-2xl font-bold mb-2 dark:text-white">What's your name?</h2>
                <p class="text-gray-500 text-sm mb-6 dark:text-gray-400">Let us know how to address you.</p>
                <input type="text" id="new-user-name" placeholder="Enter your name" class="w-full bg-gray-50 dark:bg-slate-800 dark:text-white border border-gray-200 dark:border-slate-700 rounded-lg px-4 py-3 mb-4 font-bold focus:outline-none focus:border-black dark:focus:border-white transition-colors">
                <button onclick="finishLogin()" class="w-full bg-black dark:bg-white text-white dark:text-black py-3 rounded-lg font-bold shadow-lg hover:shadow-xl transition-all">Get Started</button>
            </div>
        </div>
    </div>

    <!-- NEW: Address Add/Edit Modal -->
    <div id="address-modal" class="fixed inset-0 z-[130] hidden">
        <div class="absolute inset-0 bg-black/60 modal-overlay backdrop-blur-sm" onclick="closeModal('address-modal')"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl p-6 modal-content scale-95 opacity-0">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold dark:text-white" id="address-modal-title">Add New Address</h3>
                <button onclick="closeModal('address-modal')"><i data-lucide="x" class="w-6 h-6 text-gray-400"></i></button>
            </div>
            
            <div class="space-y-4">
                <input type="hidden" id="addr-id"> <!-- Hidden ID for Editing -->
                
                <div>
                    <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Tag (e.g. Home, Work)</label>
                    <div class="flex gap-2" id="addr-tags">
                        <button type="button" class="flex-1 py-2 border rounded-lg text-sm font-bold bg-black text-white border-black dark:bg-white dark:text-black dark:border-white" onclick="selectTag(this, 'Home')">Home</button>
                        <button type="button" class="flex-1 py-2 border rounded-lg text-sm font-bold text-gray-500 border-gray-200 dark:border-slate-700 dark:text-gray-400" onclick="selectTag(this, 'Work')">Work</button>
                        <button type="button" class="flex-1 py-2 border rounded-lg text-sm font-bold text-gray-500 border-gray-200 dark:border-slate-700 dark:text-gray-400" onclick="selectTag(this, 'Other')">Other</button>
                    </div>
                    <input type="hidden" id="addr-tag-input" value="Home">
                </div>

                <div>
                    <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Address Details</label>
                    <textarea id="addr-text" rows="4" class="w-full bg-gray-50 dark:bg-slate-800 dark:text-white border border-gray-200 dark:border-slate-700 rounded-lg px-4 py-3 font-medium focus:outline-none focus:border-black dark:focus:border-white transition-colors resize-none" placeholder="House No, Street, Area, City..."></textarea>
                </div>

                <button onclick="saveAddress()" class="w-full bg-black dark:bg-white text-white dark:text-black py-4 rounded-xl font-bold hover:bg-gray-800 dark:hover:bg-gray-200 transition-colors shadow-lg mt-2">
                    Save Address
                </button>
            </div>
        </div>
    </div>

    <!-- Profile Edit Modal -->
    <div id="profile-modal" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-black/60 modal-overlay backdrop-blur-sm" onclick="closeModal('profile-modal')"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl p-6 modal-content scale-95 opacity-0 overflow-y-auto max-h-[90vh] hide-scroll">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold dark:text-white">Edit Profile</h3>
                <button onclick="closeModal('profile-modal')"><i data-lucide="x" class="w-6 h-6 text-gray-400"></i></button>
            </div>
            
            <div class="space-y-4">
                <!-- Avatar Upload -->
               <div class="flex justify-center mb-4">
    <div class="relative group cursor-pointer" onclick="document.getElementById('profile-upload').click()">
        <div id="profile-avatar-display" class="w-20 h-20 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center text-2xl font-bold text-purple-600 dark:text-purple-300 border-4 border-white dark:border-slate-700 shadow-lg overflow-hidden">
            JD
        </div>
        <div class="absolute bottom-0 right-0 bg-black dark:bg-white text-white dark:text-black p-1.5 rounded-full shadow-md hover:bg-gray-800 transition-colors">
            <i data-lucide="camera" class="w-3 h-3"></i>
        </div>
        <input type="file" id="profile-upload" class="hidden" accept="image/*" onchange="uploadProfileImage(this)">
    </div>
</div>
                <div>
                    <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Personal Info</label>
                    <input type="text" id="profile-name" class="w-full bg-gray-50 dark:bg-slate-800 dark:text-white border border-gray-200 dark:border-slate-700 rounded-lg px-4 py-3 mb-2 font-medium focus:outline-none focus:border-black dark:focus:border-white transition-colors" placeholder="Full Name">
                    <input type="email" id="profile-email" class="w-full bg-gray-50 dark:bg-slate-800 dark:text-white border border-gray-200 dark:border-slate-700 rounded-lg px-4 py-3 font-medium focus:outline-none focus:border-black dark:focus:border-white transition-colors" placeholder="Email Address">
                </div>

                <div>
                    <div class="flex justify-between items-end mb-2">
                        <label class="block text-xs font-bold text-gray-500 uppercase">Saved Addresses</label>
                        <button onclick="openAddressModal()" class="text-xs font-bold text-qc-yellow hover:underline">+ Add New</button>
                    </div>
                    <div id="profile-address-list" class="space-y-2">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <button onclick="saveProfile()" class="w-full bg-black dark:bg-white text-white dark:text-black py-4 rounded-xl font-bold hover:bg-gray-800 dark:hover:bg-gray-200 transition-colors shadow-lg mt-2">
                    Save Changes
                </button>
          <button onclick="confirmLogout()" class="w-full text-red-500 font-bold text-sm py-4 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors mt-2 flex items-center justify-center gap-2">
    <i data-lucide="log-out" class="w-4 h-4"></i> Logout
</button>
            </div>
        </div>
    </div>

    <!-- Wishlist Modal -->
    <div id="wishlist-modal" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-black/60 modal-overlay backdrop-blur-sm" onclick="closeModal('wishlist-modal')"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-slate-900 w-full max-w-lg rounded-2xl shadow-2xl p-0 modal-content scale-95 opacity-0 overflow-hidden">
            <div class="p-6 border-b border-gray-100 dark:border-slate-800 flex justify-between items-center bg-gray-50 dark:bg-slate-800">
                <h3 class="text-xl font-bold dark:text-white">Your Wishlist</h3>
                <button onclick="closeModal('wishlist-modal')"><i data-lucide="x" class="w-6 h-6 text-gray-400"></i></button>
            </div>
            <div id="wishlist-list-container" class="max-h-[60vh] overflow-y-auto p-0">
                <!-- JS content -->
            </div>
        </div>
    </div>

    <!-- Bookings Modal -->
    <div id="bookings-modal" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-black/60 modal-overlay backdrop-blur-sm" onclick="closeModal('bookings-modal')"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-slate-900 w-full max-w-lg rounded-2xl shadow-2xl p-0 modal-content scale-95 opacity-0 overflow-hidden">
            <div class="p-6 border-b border-gray-100 dark:border-slate-800 flex justify-between items-center bg-gray-50 dark:bg-slate-800">
                <h3 class="text-xl font-bold dark:text-white">Your Bookings</h3>
                <button onclick="closeModal('bookings-modal')"><i data-lucide="x" class="w-6 h-6 text-gray-400"></i></button>
            </div>
            <!-- Added ID for dynamic content injection -->
            <div id="bookings-list-container">
                <div class="p-12 text-center text-gray-400 flex flex-col items-center">
                    <div class="w-16 h-16 bg-gray-100 dark:bg-slate-800 rounded-full flex items-center justify-center mb-4"><i data-lucide="calendar-x" class="w-8 h-8 text-gray-300 dark:text-gray-500"></i></div>
                    <h4 class="text-lg font-bold text-gray-800 dark:text-white">No Active Bookings</h4>
                    <p class="text-sm">Looks like you haven't booked any services yet.</p>
                    <button onclick="closeModal('bookings-modal'); scrollToSection('services-slider')" class="mt-6 text-qc-yellow font-bold text-sm hover:underline">Browse Services</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Report Issue / Chat Modal -->
    <div id="issue-modal" class="fixed inset-0 z-[140] hidden">
        <div class="absolute inset-0 bg-black/60 modal-overlay backdrop-blur-sm" onclick="closeModal('issue-modal')"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden modal-content scale-95 opacity-0 flex flex-col h-[600px] max-h-[90vh]">
            <!-- Header -->
            <div class="p-4 border-b border-gray-100 dark:border-slate-800 flex justify-between items-center bg-gray-50 dark:bg-slate-800">
                <div>
                    <h3 class="font-bold dark:text-white">Support & Refunds</h3>
                    <p class="text-xs text-gray-500 dark:text-gray-400">Order #QC<span id="issue-order-id"></span></p>
                </div>
                <button onclick="closeModal('issue-modal')"><i data-lucide="x" class="w-5 h-5 text-gray-400"></i></button>
            </div>
            
            <!-- Chat Area -->
            <div id="issue-chat-body" class="flex-1 p-4 overflow-y-auto space-y-4 bg-white dark:bg-slate-900">
                <!-- Bot Message -->
                <div class="flex gap-3">
                    <div class="w-8 h-8 rounded-full bg-qc-yellow flex items-center justify-center font-bold text-xs shrink-0">QC</div>
                    <div class="bg-gray-100 dark:bg-slate-800 p-3 rounded-2xl rounded-tl-none text-sm dark:text-gray-200 max-w-[80%]">
                        Hi! I'm here to help with your refund or replacement. Please describe the damage and upload a clear photo of the item.
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="p-4 border-t border-gray-100 dark:border-slate-800 bg-gray-50 dark:bg-slate-900">
                <div class="flex gap-2 items-center">
                    <button onclick="triggerFileUpload()" class="p-2 text-gray-400 hover:text-black dark:hover:text-white hover:bg-gray-200 dark:hover:bg-slate-700 rounded-full transition-colors">
                        <i data-lucide="image-plus" class="w-5 h-5"></i>
                    </button>
                    <input type="file" id="issue-file-upload" class="hidden" accept="image/*" onchange="handleFileSelect(this)">
                    
                    <input type="text" id="issue-input" placeholder="Describe the issue..." class="flex-1 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-full px-4 py-2 text-sm focus:outline-none focus:border-black dark:focus:border-white dark:text-white" onkeypress="if(event.key === 'Enter') sendIssueMessage()">
                    
                    <button onclick="sendIssueMessage()" class="p-2 bg-black dark:bg-white text-white dark:text-black rounded-full hover:scale-105 transition-transform">
                        <i data-lucide="send" class="w-4 h-4"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Support Modal -->
    <div id="support-modal" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-black/60 modal-overlay backdrop-blur-sm" onclick="closeModal('support-modal')"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl p-6 modal-content scale-95 opacity-0">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold dark:text-white">Help & Support</h3>
                <button onclick="closeModal('support-modal')"><i data-lucide="x" class="w-6 h-6 text-gray-400"></i></button>
            </div>
            <div class="space-y-3">
                <button onclick="showToast('Connecting to agent...')" class="w-full p-4 border border-gray-100 dark:border-slate-700 rounded-xl flex items-center justify-between hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors dark:text-white">
                    <span class="font-medium">Chat with us</span>
                    <i data-lucide="message-circle" class="w-5 h-5 text-gray-400"></i>
                </button>
                <button onclick="showToast('Calling +91 999 888 777...')" class="w-full p-4 border border-gray-100 dark:border-slate-700 rounded-xl flex items-center justify-between hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors dark:text-white">
                    <span class="font-medium">Call Support</span>
                    <i data-lucide="phone" class="w-5 h-5 text-gray-400"></i>
                </button>
                <button onclick="showToast('Opening FAQ section...')" class="w-full p-4 border border-gray-100 dark:border-slate-700 rounded-xl flex items-center justify-between hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors dark:text-white">
                    <span class="font-medium">FAQs</span>
                    <i data-lucide="help-circle" class="w-5 h-5 text-gray-400"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- SIDE DRAWER (INTERACTIVE SERVICE MENU) -->
    <div id="drawer-overlay" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[60] hidden transition-opacity opacity-0" onclick="closeDrawer()"></div>
    
    <div id="service-drawer" class="fixed inset-y-0 right-0 w-full md:w-[480px] bg-white dark:bg-slate-900 z-[70] transform translate-x-full transition-transform duration-300 shadow-2xl flex flex-col">
        <div class="p-6 border-b border-gray-100 dark:border-slate-800 flex justify-between items-start bg-white dark:bg-slate-900 z-10 sticky top-0">
            <div>
                <h2 class="text-2xl font-extrabold text-gray-900 dark:text-white" id="drawer-title">Service Name</h2>
                <div class="flex items-center gap-2 mt-1 text-sm font-medium text-gray-500 dark:text-gray-400">
                    <i data-lucide="star" class="w-4 h-4 fill-yellow-400 text-yellow-400"></i>
                    <span>4.8 (Verified)</span>
                    <span class="w-1 h-1 bg-gray-400 rounded-full"></span>
                    <span class="text-green-600 flex items-center gap-1"><i data-lucide="shield-check" class="w-3 h-3"></i> QC Safe</span>
                </div>
            </div>
            <button onclick="closeDrawer()" class="p-2 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-full transition-colors"><i data-lucide="x" class="w-6 h-6 text-gray-400"></i></button>
        </div>

        <div id="drawer-content" class="flex-1 overflow-y-auto p-6 space-y-4 bg-gray-50 dark:bg-slate-950">
            <!-- JS Injected Items -->
        </div>

        <div class="p-6 border-t border-gray-100 dark:border-slate-800 bg-white dark:bg-slate-900 z-10 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]">
            <div class="flex justify-between items-center mb-4">
                <span class="text-gray-500 dark:text-gray-400 font-bold">Total</span>
                <span class="text-2xl font-black dark:text-white" id="drawer-total">0</span>
            </div>
            <button onclick="closeDrawer(); toggleCart()" class="w-full bg-black dark:bg-white text-white dark:text-black py-4 rounded-xl font-bold hover:bg-gray-800 dark:hover:bg-gray-200 transition-colors shadow-lg">View Cart</button>
        </div>
    </div>

    <!-- Cart Drawer -->
  <div id="cart-drawer" class="fixed top-24 right-4 md:right-8 w-[calc(100%-2rem)] md:w-[400px] max-h-[80vh] bg-white dark:bg-slate-900 z-[100] transform translate-x-[120%] transition-transform duration-300 shadow-2xl flex flex-col rounded-3xl border border-gray-100 dark:border-slate-700">
    
    <div class="p-6 border-b border-gray-100 dark:border-slate-800 flex justify-between items-center">
        <h2 class="text-xl font-bold dark:text-white">Your Cart</h2>
        <button onclick="toggleCart()"><i data-lucide="x" class="w-6 h-6 text-gray-400 hover:text-black dark:hover:text-white"></i></button>
    </div>

    <div id="cart-items" class="flex-1 overflow-y-auto p-6 space-y-4 min-h-[150px]">
        </div>
    
    <div class="px-6 py-4 bg-gray-50 dark:bg-slate-800 border-t border-gray-100 dark:border-slate-700">
            <div class="flex gap-2">
                <div class="relative flex-1">
                    <i data-lucide="tag" class="absolute left-3 top-3 w-4 h-4 text-gray-400"></i>
                    <input type="text" placeholder="Coupon Code (Try 'QC20')" class="w-full pl-9 pr-4 py-2 rounded-lg border border-gray-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-sm font-bold uppercase focus:outline-none focus:border-black dark:focus:border-white dark:text-white" id="coupon-input">
                </div>
                <button onclick="applyCoupon()" class="text-sm font-bold text-qc-black dark:text-white px-4 hover:bg-gray-200 dark:hover:bg-slate-700 rounded-lg transition-colors">APPLY</button>
            </div>
            <p class="text-xs text-green-600 font-bold mt-2 hidden" id="coupon-msg">Coupon Applied Successfully!</p>
    </div>

    <div class="p-6 border-t border-gray-100 dark:border-slate-800 bg-white dark:bg-slate-900 rounded-b-3xl">
        <div class="flex justify-between items-center mb-4">
            <span class="font-medium text-gray-500 dark:text-gray-400">Total</span>
            <span class="font-black text-2xl dark:text-white" id="cart-total">0</span>
        </div>
        <button onclick="openCheckoutModal()" class="w-full bg-black dark:bg-white text-white dark:text-black py-4 rounded-xl font-bold hover:bg-gray-800 dark:hover:bg-gray-200 transition-colors shadow-lg">Checkout</button>
    </div>
</div>

    <!-- NEW: FULL CHECKOUT MODAL (Split Screen) -->
    <div id="full-checkout-modal" class="fixed inset-0 z-[110] hidden bg-gray-100 dark:bg-slate-950">
        <div class="max-w-7xl mx-auto h-full flex flex-col md:flex-row">
            
            <!-- Left Side: Suggestions (The Urban Company "Side Suggestion") -->
            <div class="w-full md:w-5/12 bg-gray-50 dark:bg-slate-900 p-6 md:p-10 border-r border-gray-200 dark:border-slate-800 overflow-y-auto relative hidden md:block">
                <button onclick="closeCheckoutModal()" class="absolute top-6 left-6 flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white font-bold text-sm">
                    <i data-lucide="arrow-left" class="w-4 h-4"></i> Back
                </button>
                <div class="mt-12">
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Frequently added together</h2>
                    <p class="text-gray-500 dark:text-gray-400 text-sm mb-8">Customers who booked this also added these essentials.</p>
                    
                    <div class="space-y-4" id="checkout-suggestions">
                        <!-- JS Injected Suggestions -->
                    </div>
                </div>
            </div>

            <!-- Right Side: Checkout Steps -->
            <div class="w-full md:w-7/12 bg-white dark:bg-slate-950 flex flex-col h-full">
                <div class="p-6 border-b border-gray-100 dark:border-slate-800 flex justify-between items-center md:hidden">
                    <button onclick="closeCheckoutModal()" class="dark:text-white"><i data-lucide="arrow-left" class="w-6 h-6"></i></button>
                    <h3 class="font-bold dark:text-white">Checkout</h3>
                    <div class="w-6"></div>
                </div>

                <div class="flex-1 overflow-y-auto p-6 md:p-12">
                    
                    <!-- Step 0: Order Review -->
                     <div class="mb-8 border border-gray-100 dark:border-slate-800 rounded-xl p-4 bg-gray-50 dark:bg-slate-900">
                        <div class="flex justify-between items-center mb-2 cursor-pointer" onclick="toggleCheckoutItems()">
                            <h3 class="text-lg font-bold flex items-center gap-2 dark:text-white">
                                <span class="w-6 h-6 bg-qc-green text-white rounded-full flex items-center justify-center text-xs"><i data-lucide="shopping-bag" class="w-3 h-3"></i></span>
                                Order Summary
                            </h3>
                             <i data-lucide="chevron-down" class="w-4 h-4 text-gray-500" id="checkout-items-toggle-icon"></i>
                        </div>
                        <div id="checkout-cart-items-container" class="hidden space-y-3 mt-3 pt-3 border-t border-gray-200 dark:border-slate-800 dark:text-gray-300">
                            <!-- Items Injected Here -->
                        </div>
                    </div>


                    <!-- Step 1: Address -->
                    <div class="mb-8">
                        <h3 class="text-lg font-bold mb-4 flex items-center gap-2 dark:text-white">
                            <span class="w-6 h-6 bg-black dark:bg-white text-white dark:text-black rounded-full flex items-center justify-center text-xs">1</span>
                            Address Details
                        </h3>
                        <div id="address-list" class="space-y-3">
                            <!-- Default Address injected by JS -->
                        </div>
                        <!-- CHANGED: Opens form modal instead of auto-add -->
                        <button onclick="openAddressModal()" class="text-qc-yellow font-bold text-sm mt-3 flex items-center gap-1 hover:underline">+ Add New Address</button>
                    </div>

                    <!-- Step 2: Slot Selection -->
                    <div class="mb-8">
                        <h3 class="text-lg font-bold mb-4 flex items-center gap-2 dark:text-white">
                            <span class="w-6 h-6 bg-black dark:bg-white text-white dark:text-black rounded-full flex items-center justify-center text-xs">2</span>
                            Select Date & Time
                        </h3>
                        
                        <!-- Dates -->
                        <div class="flex gap-3 overflow-x-auto pb-2 mb-4 hide-scroll">
                            <button onclick="selectDate(this)" class="flex-shrink-0 w-16 h-20 border border-black dark:border-white bg-black dark:bg-white text-white dark:text-black rounded-xl flex flex-col items-center justify-center slot-btn selected">
                                <span class="text-xs font-medium opacity-80">TODAY</span>
                                <span class="text-lg font-bold">26</span>
                            </button>
                            <button onclick="selectDate(this)" class="flex-shrink-0 w-16 h-20 border border-gray-200 dark:border-slate-700 rounded-xl flex flex-col items-center justify-center hover:border-gray-400 dark:hover:border-slate-500 transition-colors slot-btn">
                                <span class="text-xs font-bold text-gray-400">TOM</span>
                                <span class="text-lg font-bold text-gray-800 dark:text-white">27</span>
                            </button>
                            <button onclick="selectDate(this)" class="flex-shrink-0 w-16 h-20 border border-gray-200 dark:border-slate-700 rounded-xl flex flex-col items-center justify-center hover:border-gray-400 dark:hover:border-slate-500 transition-colors slot-btn">
                                <span class="text-xs font-bold text-gray-400">WED</span>
                                <span class="text-lg font-bold text-gray-800 dark:text-white">28</span>
                            </button>
                        </div>

                        <!-- Times -->
                        <div class="grid grid-cols-3 gap-3">
                            <button onclick="selectTime(this)" class="py-2 border border-gray-200 dark:border-slate-700 rounded-lg text-sm font-bold text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-slate-900 time-btn">10:00 AM</button>
                            <button onclick="selectTime(this)" class="py-2 border border-black dark:border-white bg-black dark:bg-white text-white dark:text-black rounded-lg text-sm font-bold shadow-md time-btn selected">02:00 PM</button>
                            <button onclick="selectTime(this)" class="py-2 border border-gray-200 dark:border-slate-700 rounded-lg text-sm font-bold text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-slate-900 time-btn">06:00 PM</button>
                        </div>
                    </div>

                    <!-- Step 3: Payment Summary -->
                    <div class="mb-8">
                         <h3 class="text-lg font-bold mb-4 flex items-center gap-2 dark:text-white">
                            <span class="w-6 h-6 bg-black dark:bg-white text-white dark:text-black rounded-full flex items-center justify-center text-xs">3</span>
                            Payment
                        </h3>
                        <div class="border border-gray-200 dark:border-slate-800 rounded-xl p-4">
                            <div class="flex justify-between text-sm mb-2">
                                <span class="text-gray-500 dark:text-gray-400">Item Total</span>
                                <span class="font-bold dark:text-white" id="checkout-item-total">0</span>
                            </div>
                            <div class="flex justify-between text-sm mb-2">
                                <span class="text-gray-500 dark:text-gray-400">Taxes & Fees</span>
                                <span class="font-bold dark:text-white">49</span>
                            </div>
                            <div class="flex justify-between text-sm mb-4 text-green-600 font-bold hidden" id="checkout-discount-row">
                                <span>Coupon Discount</span>
                                <span id="checkout-discount">-0</span>
                            </div>
                            <div class="border-t border-gray-200 dark:border-slate-800 pt-3 flex justify-between items-center">
                                <span class="font-bold text-lg dark:text-white">To Pay</span>
                                <span class="font-black text-xl dark:text-white" id="checkout-final-total">0</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="p-6 border-t border-gray-100 dark:border-slate-800">
                    <button onclick="placeOrder()" id="place-order-btn" class="w-full bg-qc-yellow text-black py-4 rounded-xl font-bold hover:bg-yellow-400 transition-all shadow-lg text-lg flex items-center justify-center gap-2">
                        Place Order
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Checkout Success Modal -->
    <div id="checkout-success-modal" class="fixed inset-0 z-[120] hidden">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center">
            <div class="bg-white dark:bg-slate-900 p-8 rounded-2xl text-center max-w-sm mx-4 animate-bounce-in relative overflow-hidden">
                <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 relative z-10">
                    <i data-lucide="check" class="w-10 h-10 text-green-600"></i>
                </div>
                <h2 class="text-2xl font-bold mb-2 relative z-10 dark:text-white">Order Placed!</h2>
                <p class="text-gray-500 dark:text-gray-400 mb-6 relative z-10">Booking ID: #QC<span id="booking-id">8829</span><br>Technician will arrive at selected time.</p>
                <button onclick="closeSuccessModal()" class="bg-black dark:bg-white text-white dark:text-black px-8 py-3 rounded-xl font-bold relative z-10 hover:scale-105 transition-transform">Done</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="fixed bottom-10 left-1/2 -translate-x-1/2 bg-black dark:bg-white text-white dark:text-black px-6 py-3 rounded-full shadow-2xl z-[150] transform translate-y-20 opacity-0 transition-all duration-300 flex items-center gap-3">
        <i data-lucide="check-circle" class="w-5 h-5 text-green-400 dark:text-green-600"></i>
        <span class="font-bold text-sm" id="toast-msg">Item added to cart</span>
    </div>

    <!-- LEAFLET JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <!-- ================= JAVASCRIPT ================= -->
    <script>
        // --- THEME TOGGLE LOGIC ---
        function toggleTheme() {
            const html = document.documentElement;
            if (html.classList.contains('dark')) {
                html.classList.remove('dark');
                localStorage.setItem('theme', 'light');
            } else {
                html.classList.add('dark');
                localStorage.setItem('theme', 'dark');
            }
        }

        // --- USER DATA ---
    let userData = {
    name: "",             // Empty name
    phone: "",            // Empty phone
    email: "",            // Empty email
    initials: "",         // Empty initials
    avatar: null,         // No profile picture
    addresses: [],        // No saved addresses
    bookings: [],         // No bookings
    wishlist: []          // No wishlist
};
        // --- DATA ---
        const hardware = [
            { id: 1, name: "Bosch Angle Grinder", price: 2400, img: "https://images.unsplash.com/photo-1504148455328-c376907d081c?w=400", tag: "BESTSELLER" },
            { id: 2, name: "Estwing Claw Hammer", price: 1899, img: "https://images.unsplash.com/photo-1586864387967-d02ef85d93e8?w=400", tag: "PRO" },
            { id: 3, name: "Royale Wall Paint (4L)", price: 1450, img: "https://images.unsplash.com/photo-1589939705384-5185137a7f0f?w=400", tag: "" },
            { id: 4, name: "DeWalt Cordless Drill", price: 3500, img: "https://images.unsplash.com/photo-1572981779307-38b8cabb2407?w=400", tag: "NEW" },
            { id: 5, name: "Stanley Tool Set", price: 5500, img: "https://images.unsplash.com/photo-1530124566582-a618bc2615dc?w=400", tag: "DEAL" }
        ];

        const services = [
            { id: 101, name: "AC Service & Repair", rating: "4.84 (2.1M)", price: 499, img: "https://images.unsplash.com/photo-1621905252507-b35492cc74b4?w=400" },
            { id: 102, name: "Electrician Visit", rating: "4.75 (500k)", price: 199, img: "https://images.unsplash.com/photo-1621905251189-08b45d6a269e?w=400" },
            { id: 103, name: "Bathroom Cleaning", rating: "4.80 (800k)", price: 399, img: "https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=400" },
            { id: 104, name: "Full Home Painting", rating: "4.90 (120k)", price: 5999, img: "https://images.unsplash.com/photo-1589939705384-5185137a7f0f?w=400" }
        ];

        // ENHANCED Service Data with 'features' and 'crossSell'
        // ADDED IMAGES HERE TO FIX "EMPTY SPACE" IN CART
      const serviceData = {
    'loadman': { 
        title: 'Loadman Services', 
        items: [
            { id: 'lm1', name: 'Heavy Lifting', price: 499, desc: 'Moving heavy furniture/boxes (per hour)' },
            { id: 'lm2', name: 'Material Shifting', price: 899, desc: 'Construction material shifting' },
            { id: 'lm3', name: 'Truck Loading', price: 600, desc: 'Loading/Unloading services' }
        ],
        features: ["Strong & Experienced", "Safety Gear Used", "Team Available"]
    },
    'mason': { 
        title: 'Masonry Services', 
        items: [
            { id: 'ms1', name: 'Tile Laying', price: 45, desc: 'Per sq. ft. tile installation' },
            { id: 'ms2', name: 'Wall Plastering', price: 599, desc: 'Fixing wall cracks and plaster' },
            { id: 'ms3', name: 'Brick Work', price: 850, desc: 'General construction work (per day)' }
        ],
        features: ["Skilled Masons", "Durable Work", "Clean Finish"]
    },
    'wager': { 
        title: 'Wager (Siththaal)', 
        items: [
            { id: 'wg1', name: 'Construction Helper', price: 800, desc: 'Daily wage helper (8 hours)' },
            { id: 'wg2', name: 'Concrete Mixing', price: 900, desc: 'Manual concrete mixing support' },
            { id: 'wg3', name: 'Site Cleaning', price: 500, desc: 'Debris removal and site cleanup' }
        ],
        features: ["Hardworking Staff", "Timely Arrival", "Supervised Work"]
    },
    // ... keep your other services like 'paint', 'ac' if you still want them searchable ...
};

        let cart = {};
        let isLoggedIn = false;
        let currentServiceKey = null;
        let couponDiscount = 0;

        // --- MAP VARIABLES ---
        let map;
        let userMarker;
        let workerMarkers = [];
        let mapInitialized = false;
        const DEFAULT_COORDS = [13.0827, 80.2707]; // Chennai

        // --- RENDER FUNCTIONS ---
        function renderContent() {
            // Hardware Render
           const hwContainer = document.getElementById('hardware-slider');
    
    // Save scroll position so it doesn't jump
    const currentScroll = hwContainer.scrollLeft;

    hwContainer.innerHTML = hardware.map(item => {
        const qty = cart[item.id]?.qty || 0;
        
        return `
        <div class="snap-start shrink-0 w-[240px] group cursor-pointer relative animated-card" onclick="addToCart(${item.id}, 'hw')">
            <div class="h-[280px] bg-gray-50 dark:bg-slate-900 rounded-2xl overflow-hidden relative shadow-card group-hover:shadow-hover transition-all duration-300 border border-gray-100 dark:border-slate-800">
                <img src="${item.img}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105">
                ${item.tag ? `<div class="absolute top-3 left-3 bg-black text-white text-[10px] font-bold px-2 py-1 rounded shadow-md tracking-wider">${item.tag}</div>` : ''}
                
                <div class="absolute bottom-4 right-4 z-20">
                    ${qty > 0 ? 
                        // SHOW COUNTER (If added)
                        `<div class="flex items-center bg-black dark:bg-white text-white dark:text-black rounded-lg shadow-xl overflow-hidden animate-bounce-in" onclick="event.stopPropagation()">
                            <button onclick="updateQty(${item.id}, -1, 'hw')" class="w-8 h-8 flex items-center justify-center hover:bg-gray-800 dark:hover:bg-gray-200 font-bold">-</button>
                            <span class="font-bold text-sm px-1 min-w-[20px] text-center">${qty}</span>
                            <button onclick="updateQty(${item.id}, 1, 'hw')" class="w-8 h-8 flex items-center justify-center hover:bg-gray-800 dark:hover:bg-gray-200 font-bold">+</button>
                        </div>` 
                        : 
                        // SHOW ADD BUTTON (If not added)
                        `<button onclick="event.stopPropagation(); addToCart(${item.id}, 'hw')" class="bg-white text-black font-bold px-4 py-2 rounded-lg shadow-lg translate-y-12 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-300 hover:bg-qc-yellow">Add</button>`
                    }
                </div>
                
                <button onclick="event.stopPropagation(); toggleLike(this, ${item.id})" class="heart-btn absolute top-3 right-3 w-8 h-8 rounded-full bg-white/80 dark:bg-black/60 flex items-center justify-center hover:bg-white dark:hover:bg-black shadow-sm z-20">
                    <i data-lucide="heart" class="w-4 h-4 text-gray-400"></i>
                </button>
            </div>
            <div class="mt-3 px-1">
                <div class="flex justify-between items-start">
                    <h3 class="font-bold text-gray-900 dark:text-white leading-tight pr-2">${item.name}</h3>
                    <span class="font-bold text-sm dark:text-white">${item.price}</span>
                </div>
                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Hardware</p>
            </div>
        </div>
    `}).join('');

    // Restore scroll position
    if(currentScroll > 0) hwContainer.scrollLeft = currentScroll;
            // Services Render
            const svContainer = document.getElementById('services-slider');
            svContainer.innerHTML = services.map(item => `
                <div class="snap-start shrink-0 w-[340px] bg-white dark:bg-slate-900 p-4 rounded-3xl border border-gray-100 dark:border-slate-800 shadow-card hover:shadow-hover transition-all cursor-pointer group flex items-center gap-4 animated-card" onclick="addToCart(${item.id}, 'sv')">
                    <div class="w-24 h-24 bg-gray-100 dark:bg-slate-800 rounded-2xl overflow-hidden shrink-0">
                        <img src="${item.img}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                    </div>
                    <div class="flex-1">
                        <h3 class="font-bold text-gray-900 dark:text-white mb-1 leading-tight">${item.name}</h3>
                        <div class="flex items-center gap-1 mb-2 text-xs font-bold text-gray-500 dark:text-gray-400">
                            <i data-lucide="star" class="w-3 h-3 text-black dark:text-white fill-black dark:fill-white"></i> ${item.rating}
                        </div>
                        <div class="flex justify-between items-center border-t border-gray-100 dark:border-slate-800 pt-2">
                            <span class="font-bold dark:text-white">${item.price}</span>
                            <button onclick="event.stopPropagation(); addToCart(${item.id}, 'sv')" class="text-qc-yellow font-bold text-sm px-3 py-1 rounded hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors uppercase">Add</button>
                        </div>
                    </div>
                </div>
            `).join('');

            lucide.createIcons();
            
            // Initializing Scroll Observer
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.scroll-trigger').forEach((el) => observer.observe(el));
            
            // Start Search Animation
           
        }

        // --- MAP FUNCTIONS ---

        function openHireMap() {
            document.getElementById('hire-map-overlay').classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
            
            // Initialize Categories List in Sidebar
            const catList = document.getElementById('map-category-list');
            catList.innerHTML = Object.keys(serviceData).map(key => `
                <div class="flex items-center gap-3 p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-slate-800 cursor-pointer transition-colors border border-transparent hover:border-gray-200 dark:hover:border-slate-700" onclick="filterMap('${key}')">
                    <div class="w-10 h-10 rounded-lg bg-gray-100 dark:bg-slate-800 flex items-center justify-center text-gray-600 dark:text-gray-300">
                        ${getIconForCategory(key)}
                    </div>
                    <div class="flex-1">
                        <h4 class="font-bold text-sm dark:text-white capitalize">${key}</h4>
                        <p class="text-xs text-green-600 font-bold">${Math.floor(Math.random() * 8) + 2} Pros nearby</p>
                    </div>
                    <i data-lucide="chevron-right" class="w-4 h-4 text-gray-400"></i>
                </div>
            `).join('');
            lucide.createIcons();

            // Initialize Map
            if (!mapInitialized) {
                initMap();
                mapInitialized = true;
            } else {
                setTimeout(() => map.invalidateSize(), 100); // Fix rendering issues if hidden
            }
        }

        function closeHireMap() {
            document.getElementById('hire-map-overlay').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function getIconForCategory(key) {
            const icons = {
                'cleaning': '<i data-lucide="spray-can" class="w-5 h-5"></i>',
                'paint': '<i data-lucide="paint-bucket" class="w-5 h-5"></i>',
                'ac': '<i data-lucide="snowflake" class="w-5 h-5"></i>',
                'carpenter': '<i data-lucide="hammer" class="w-5 h-5"></i>',
                'electrician': '<i data-lucide="zap" class="w-5 h-5"></i>',
                'construction': '<i data-lucide="hard-hat" class="w-5 h-5"></i>',
                'mason': '<i data-lucide="brick-wall" class="w-5 h-5"></i>'
            };
            return icons[key] || '<i data-lucide="user" class="w-5 h-5"></i>';
        }

        function initMap() {
            // Create Map Instance
            map = L.map('leaflet-map', {
                zoomControl: false,
                attributionControl: false
            }).setView(DEFAULT_COORDS, 14);

            // Add Tile Layer (OpenStreetMap)
            // Using a darker style if in dark mode could be done, but keeping simple OSM for now
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19
            }).addTo(map);

            // Add Custom User Marker (Pulsing Dot)
            const userIcon = L.divIcon({
                className: 'user-pulse',
                iconSize: [20, 20],
                iconAnchor: [10, 10]
            });
            userMarker = L.marker(DEFAULT_COORDS, { icon: userIcon }).addTo(map);

            // Add Random Worker Markers
            addRandomWorkers('all');

            // Simulate Movement Loop
            setInterval(moveWorkers, 2000);
        }

        function addRandomWorkers(category) {
            // Clear existing
            workerMarkers.forEach(m => map.removeLayer(m));
            workerMarkers = [];

            // Generate random count
            const count = 8; 
            
            for(let i=0; i<count; i++) {
                // Random position near center
                const lat = DEFAULT_COORDS[0] + (Math.random() - 0.5) * 0.04;
                const lng = DEFAULT_COORDS[1] + (Math.random() - 0.5) * 0.04;
                
                // Create Marker Icon
                // We'll use a simple colored dot or icon
                const color = ['#ef4444', '#3b82f6', '#f59e0b', '#10b981'][Math.floor(Math.random()*4)];
                
                const workerIcon = L.divIcon({
                    html: `<div style="background:${color}; width:30px; height:30px; border-radius:50%; border:2px solid white; display:flex; align-items:center; justify-content:center; box-shadow:0 4px 6px rgba(0,0,0,0.3);">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                           </div>`,
                    className: 'worker-marker',
                    iconSize: [30, 30],
                    iconAnchor: [15, 15]
                });

                const marker = L.marker([lat, lng], { icon: workerIcon }).addTo(map)
                    .bindPopup(`<div class="font-bold text-sm">Pro #${i+1}</div><div class="text-xs text-gray-500">2 mins away</div>`);
                
                // Store movement target
                marker.targetLat = lat;
                marker.targetLng = lng;
                
                workerMarkers.push(marker);
            }
        }

        function moveWorkers() {
            workerMarkers.forEach(marker => {
                // Move slightly
                const moveLat = (Math.random() - 0.5) * 0.001;
                const moveLng = (Math.random() - 0.5) * 0.001;
                
                const newLat = marker.getLatLng().lat + moveLat;
                const newLng = marker.getLatLng().lng + moveLng;
                
                marker.setLatLng([newLat, newLng]);
            });
        }

        function filterMap(category) {
            document.getElementById('map-status-text').innerText = `Finding ${category} pros...`;
            
            // Remove markers and re-add with delay to simulate "Fetching"
            workerMarkers.forEach(m => map.removeLayer(m));
            
            setTimeout(() => {
                addRandomWorkers(category);
                document.getElementById('map-status-text').innerText = `${workerMarkers.length} ${category} pros found`;
            }, 800);
            
            // On mobile, maybe close the bottom sheet slightly? (Not implemented for simplicity)
        }

        function recenterMap() {
            map.flyTo(DEFAULT_COORDS, 14);
        }

        // --- SIDE DRAWER LOGIC ---
        function openDrawer(key) {
            currentServiceKey = key;
            const data = serviceData[key];
            if(!data) return;

            document.getElementById('drawer-title').innerText = data.title;
            const container = document.getElementById('drawer-content');
            
            // Generate Features List
            let featuresHtml = '';
            if(data.features) {
                featuresHtml = `
                <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-xl p-4 mb-6">
                    <h5 class="text-xs font-bold text-blue-800 dark:text-blue-300 uppercase tracking-wide mb-3">What's Included</h5>
                    <ul class="space-y-2">
                        ${data.features.map(f => `
                            <li class="flex items-center gap-2 text-sm text-blue-900 dark:text-blue-200">
                                <i data-lucide="check" class="w-4 h-4 text-blue-500"></i> ${f}
                            </li>
                        `).join('')}
                    </ul>
                </div>`;
            }

            // Generate Items List
            const itemsHtml = data.items.map(item => {
                const qty = cart[item.id]?.qty || 0;
                return `
                <div class="bg-white dark:bg-slate-900 p-4 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start">
                        <div class="flex-1 pr-4">
                            <h4 class="font-bold text-gray-900 dark:text-white text-lg">${item.name}</h4>
                            <div class="font-bold text-gray-900 dark:text-white mt-1">${item.price}</div>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-2 leading-relaxed">${item.desc}</p>
                        </div>
                        <div class="w-24 flex-shrink-0">
                            ${qty === 0 ? 
                                `<button onclick="updateQty('${item.id}', 1, 'drawer')" class="w-full py-2 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 text-blue-600 dark:text-blue-400 font-bold rounded-lg hover:bg-blue-50 dark:hover:bg-slate-700 transition-colors shadow-sm">ADD</button>` 
                                : 
                                `<div class="flex items-center justify-between border border-blue-600 dark:border-blue-400 rounded-lg bg-blue-50 dark:bg-slate-800 p-1">
                                    <button onclick="updateQty('${item.id}', -1, 'drawer')" class="w-8 h-6 flex items-center justify-center font-bold text-blue-600 dark:text-blue-400">-</button>
                                    <span class="font-bold text-sm dark:text-white">${qty}</span>
                                    <button onclick="updateQty('${item.id}', 1, 'drawer')" class="w-8 h-6 flex items-center justify-center font-bold text-blue-600 dark:text-blue-400">+</button>
                                </div>`
                            }
                        </div>
                    </div>
                </div>
            `}).join('');
            
            container.innerHTML = featuresHtml + itemsHtml;

            updateDrawerTotal();
            document.getElementById('drawer-overlay').classList.remove('hidden');
            const drawer = document.getElementById('service-drawer');
            // Desktop Logic
            drawer.classList.remove('translate-x-full');
            // Mobile Logic (Adds 'open' class for bottom sheet slide up)
            if(window.innerWidth < 768) {
                drawer.classList.add('open');
            }
            
            // Re-init icons for the features list
            lucide.createIcons();

            requestAnimationFrame(() => {
                document.getElementById('drawer-overlay').classList.remove('opacity-0');
            });
        }

     function closeDrawer() {
            const drawer = document.getElementById('service-drawer');
            drawer.classList.add('translate-x-full'); // Reset desktop
            drawer.classList.remove('open'); // Reset mobile

            document.getElementById('drawer-overlay').classList.add('opacity-0');
            setTimeout(() => {
                document.getElementById('drawer-overlay').classList.add('hidden');
            }, 300);
        }
        function updateDrawerTotal() {
            const total = Object.values(cart).reduce((a,b) => a + (b.price * b.qty), 0);
            document.getElementById('drawer-total').innerText = "" + total;
        }
// --- NOTIFICATION HELPERS (UPDATED) ---
let cartNotifTimer;

function showCartNotification(item) {
    const el = document.getElementById('cart-notification');
    
    // Fill Data
    document.getElementById('notif-name').innerText = item.name;
    document.getElementById('notif-price').innerText = "" + item.price;
    document.getElementById('notif-img').src = item.img || '';

    // Show Animation (Drop down from top)
    el.classList.remove('hidden');
    setTimeout(() => {
        // Remove the invisible/moved-up state
        el.classList.remove('translate-y-[-20px]', 'opacity-0');
    }, 10);

    clearTimeout(cartNotifTimer);
    cartNotifTimer = setTimeout(hideCartNotification, 4000);
}

function hideCartNotification() {
    const el = document.getElementById('cart-notification');
    // Add back the invisible/moved-up state
    el.classList.add('translate-y-[-20px]', 'opacity-0');
    setTimeout(() => {
        el.classList.add('hidden');
    }, 300);
}
        // --- CART & LOGIC ---
      function addToCart(id, type) {
    let item;
    // Find the item
    if(type === 'hw') item = hardware.find(i => i.id == id);
    else if(type === 'sv') item = services.find(i => i.id == id);
    else if(type === 'suggest') {
        const allSuggestions = [];
        Object.values(serviceData).forEach(sd => {
            if(sd.suggestions) allSuggestions.push(...sd.suggestions);
        });
        item = allSuggestions.find(i => i.id == id) || 
               hardware.find(i => i.id == id) || 
               services.find(i => i.id == id);
    }
    
    // Add item and show Popup
    if(item) {
        updateQty(item.id, 1, type, item); 
        
        // THIS IS THE NEW POPUP LINE
        showCartNotification(item); 
        
        if(type === 'suggest' && !document.getElementById('full-checkout-modal').classList.contains('hidden')) {
             updateCheckoutSummary();
             renderCheckoutItems(); 
        }
    }
}
        function updateQty(id, change, source, itemData = null) {
            let item = itemData;
            
            // Try to find item if not provided
            if(!item) {
                if(cart[id]) {
                    item = cart[id];
                } else {
                     // Exhaustive search
                    Object.values(serviceData).forEach(service => {
                        const found = service.items.find(i => i.id == id);
                        if(found) item = found;
                        const foundSug = service.suggestions?.find(i => i.id == id);
                        if(foundSug && !item) item = foundSug;
                    });
                    if(!item) item = hardware.find(i => i.id == id);
                    if(!item) item = services.find(i => i.id == id);
                }
            }

            if(!item) return;

            if(!cart[id]) cart[id] = { ...item, qty: 0 };
            cart[id].qty += change;

            if(cart[id].qty <= 0) delete cart[id];

            updateCartUI();
            renderContent(); 
            
            // Sync Checkout if open
            if(!document.getElementById('full-checkout-modal').classList.contains('hidden')) {
                updateCheckoutSummary();
                renderCheckoutItems();
            }
            
            if(source === 'drawer') openDrawer(currentServiceKey);
        }

      function updateCartUI() {
    const count = Object.values(cart).reduce((a,b) => a + b.qty, 0);

    // Update Desktop Badge
    const badge = document.getElementById('cart-badge');
    if(badge) {
        badge.innerText = count;
        badge.classList.toggle('scale-0', count === 0);
    }
// Update Mobile Badge
    const mobileBadge = document.getElementById('cart-badge-mobile');
    if(mobileBadge) {
        mobileBadge.innerText = count;
        mobileBadge.classList.toggle('scale-0', count === 0);
    }

    const total = Object.values(cart).reduce((a,b) => a + (b.price * b.qty), 0);
            document.getElementById('cart-total').innerText = "" + total;
            
            const itemsContainer = document.getElementById('cart-items');
            if(count === 0) {
                itemsContainer.innerHTML = `
                    <div class="h-full flex flex-col items-center justify-center text-gray-400">
                        <i data-lucide="shopping-cart" class="w-16 h-16 mb-4 opacity-20"></i>
                        <p>Your cart is empty</p>
                    </div>`;
            } else {
                itemsContainer.innerHTML = Object.values(cart).map(i => `
                    <div class="flex gap-4 mb-4 bg-gray-50 dark:bg-slate-800 p-3 rounded-2xl">
                        <div class="w-16 h-16 rounded-xl overflow-hidden bg-white shrink-0">
                            ${i.img ? `<img src="${i.img}" class="w-full h-full object-cover">` : `<div class="w-full h-full bg-gray-200 flex items-center justify-center text-xs font-bold text-gray-500">QC</div>`}
                        </div>
                        <div class="flex-1">
                            <div class="font-bold text-sm text-gray-900 dark:text-white line-clamp-1">${i.name}</div>
                            <div class="text-xs text-gray-500 dark:text-gray-400 mb-2">${i.price}</div>
                            <div class="flex items-center gap-3">
                                <button class="w-6 h-6 bg-gray-200 dark:bg-slate-700 rounded-lg flex items-center justify-center font-bold hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors" onclick="updateQty('${i.id}', -1)">-</button>
                                <span class="text-xs font-bold text-black dark:text-white">${i.qty}</span>
                                <button class="w-6 h-6 bg-gray-200 dark:bg-slate-700 rounded-lg flex items-center justify-center font-bold hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors" onclick="updateQty('${i.id}', 1)">+</button>
                            </div>
                        </div>
                        <div class="font-bold self-end text-sm dark:text-white">${i.price * i.qty}</div>
                    </div>
                `).join('');
            }
            lucide.createIcons();
        }

        function applyCoupon() {
            const code = document.getElementById('coupon-input').value.trim().toUpperCase();
            if(code === 'QC20') {
                couponDiscount = 100; // Flat discount example
                document.getElementById('coupon-msg').classList.remove('hidden');
                document.getElementById('coupon-input').classList.add('border-green-500', 'text-green-600');
                showToast("Coupon QC20 Applied!");
                updateCheckoutSummary();
            } else {
                showToast("Invalid Coupon");
            }
        }

        // --- CHECKOUT MODAL LOGIC ---
        function updateCheckoutSummary() {
            const total = Object.values(cart).reduce((a,b) => a + (b.price * b.qty), 0);
            document.getElementById('checkout-item-total').innerText = "" + total;
            
            if(couponDiscount > 0) {
                document.getElementById('checkout-discount-row').classList.remove('hidden');
                document.getElementById('checkout-discount').innerText = "-" + couponDiscount;
            }
            
            const finalTotal = Math.max(0, total + 49 - couponDiscount);
            document.getElementById('checkout-final-total').innerText = "" + finalTotal; 
        }

        function renderCheckoutItems() {
             const container = document.getElementById('checkout-cart-items-container');
             const hasItems = Object.keys(cart).length > 0;
             
             if(hasItems) {
                container.innerHTML = Object.values(cart).map(i => `
                    <div class="flex justify-between items-center text-sm border-b border-gray-100 dark:border-slate-700 pb-2 last:border-0 last:pb-0">
                        <div class="flex items-center gap-2">
                            <span class="font-bold bg-gray-200 dark:bg-slate-700 w-5 h-5 flex items-center justify-center rounded text-xs dark:text-white">${i.qty}x</span>
                            <span class="dark:text-white">${i.name}</span>
                        </div>
                        <span class="font-medium dark:text-white">${i.price * i.qty}</span>
                    </div>
                `).join('');
             } else {
                 container.innerHTML = `<p class="text-sm text-gray-400 italic">No items</p>`;
             }
        }

        function toggleCheckoutItems() {
            const container = document.getElementById('checkout-cart-items-container');
            const icon = document.getElementById('checkout-items-toggle-icon');
            container.classList.toggle('hidden');
            if(container.classList.contains('hidden')) {
                icon.style.transform = 'rotate(0deg)';
            } else {
                icon.style.transform = 'rotate(180deg)';
            }
        }

        function renderAddresses(containerId = 'address-list') {
            const container = document.getElementById(containerId);
            if (!container) return;

            container.innerHTML = userData.addresses.map((addr, index) => `
                <div class="p-4 border border-gray-200 dark:border-slate-700 rounded-xl bg-gray-50 dark:bg-slate-800 flex justify-between items-center cursor-pointer hover:border-black dark:hover:border-white transition-colors address-card ${addr.selected ? 'selected' : ''}" onclick="selectAddress(${index}, '${containerId}')">
                    <div class="flex-1 pr-4">
                        <div class="font-bold text-sm flex items-center gap-2 dark:text-white">
                            ${addr.tag} 
                            ${index === 0 ? '<span class="text-[10px] bg-gray-200 dark:bg-slate-600 text-gray-600 dark:text-gray-200 px-1.5 rounded">Default</span>' : ''}
                        </div>
                        <div class="text-gray-500 dark:text-gray-400 text-xs mt-1 leading-relaxed">${addr.text}</div>
                    </div>
                    ${containerId === 'address-list' ? 
                        `<i data-lucide="check-circle" class="w-5 h-5 text-black fill-current check-icon" style="opacity: ${addr.selected ? 1 : 0}"></i>` 
                        : 
                        `<div class="flex gap-2">
                            <button onclick="event.stopPropagation(); editAddress(${index})" class="p-2 hover:bg-gray-200 dark:hover:bg-slate-700 rounded-full"><i data-lucide="pencil" class="w-4 h-4 text-gray-500"></i></button>
                            <button onclick="event.stopPropagation(); deleteAddress(${index})" class="p-2 hover:bg-red-100 hover:text-red-500 text-gray-400 rounded-full"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                        </div>`
                    }
                </div>
            `).join('');
            
            lucide.createIcons();
        }

        function openCheckoutModal() {
            if(Object.keys(cart).length === 0) {
                showToast("Cart is empty!");
                return;
            }
            if(!isLoggedIn) {
                toggleCart();
                openModal('login-modal');
                return;
            }
            toggleCart();
            
            updateCheckoutSummary();
            renderCheckoutItems();
            renderAddresses('address-list');

            // Populate Suggestions
            const suggestContainer = document.getElementById('checkout-suggestions');
            let suggestions = [];
            const firstCartKey = Object.keys(cart)[0];
            let category = null;
            
            Object.keys(serviceData).forEach(key => {
                const found = serviceData[key].items.find(i => i.id == firstCartKey); 
                if(found) category = key;
            });
            
            if(category && serviceData[category].suggestions) {
                suggestions = serviceData[category].suggestions;
            } else {
                suggestions = [
                    { id: 103, name: "Bathroom Cleaning", price: 399, img: "https://cdn-icons-png.flaticon.com/512/995/995053.png" },
                    { id: 5, name: "Stanley Tool Set", price: 5500, img: "https://images.unsplash.com/photo-1530124566582-a618bc2615dc?w=400" }
                ];
            }

            suggestContainer.innerHTML = suggestions.map(item => `
                <div class="flex gap-4 p-3 bg-white dark:bg-slate-800 border border-gray-100 dark:border-slate-700 rounded-xl hover:shadow-md transition-shadow">
                     <div class="w-16 h-16 rounded-lg overflow-hidden bg-gray-100 dark:bg-slate-700 shrink-0">
                        <img src="${item.img}" class="w-full h-full object-cover">
                    </div>
                    <div class="flex-1">
                        <h4 class="font-bold text-sm text-gray-900 dark:text-white">${item.name}</h4>
                        <div class="flex justify-between items-center mt-2">
                            <span class="font-bold text-sm text-gray-900 dark:text-white">${item.price}</span>
                            <button onclick="addToCart('${item.id}', 'suggest')" class="text-xs font-bold text-qc-yellow bg-black dark:bg-slate-600 dark:hover:bg-slate-500 px-3 py-1.5 rounded-lg hover:bg-gray-800 transition-colors">ADD</button>
                        </div>
                    </div>
                </div>
            `).join('');

            document.getElementById('full-checkout-modal').classList.remove('hidden');
        }

        // Slot Selection Logic
        function selectDate(btn) {
            document.querySelectorAll('.slot-btn').forEach(b => {
                b.classList.remove('selected', 'bg-black', 'text-white', 'border-black');
                b.classList.add('border-gray-200', 'text-gray-800', 'hover:border-gray-400');
                if(document.documentElement.classList.contains('dark')) {
                     b.classList.add('dark:border-slate-700', 'dark:text-white', 'dark:hover:border-slate-500');
                }
                b.querySelector('span:first-child').classList.remove('text-white', 'opacity-80');
                b.querySelector('span:first-child').classList.add('text-gray-400');
            });
            
            btn.classList.add('selected', 'bg-black', 'text-white', 'border-black');
            btn.classList.remove('border-gray-200', 'text-gray-800', 'hover:border-gray-400', 'dark:border-slate-700');
            btn.querySelector('span:first-child').classList.add('text-white', 'opacity-80');
            btn.querySelector('span:first-child').classList.remove('text-gray-400');
        }

        function selectTime(btn) {
            document.querySelectorAll('.time-btn').forEach(b => {
                b.classList.remove('selected', 'bg-black', 'text-white', 'border-black', 'shadow-md');
                b.classList.add('border-gray-200', 'text-gray-600');
                 if(document.documentElement.classList.contains('dark')) {
                     b.classList.add('dark:border-slate-700', 'dark:text-gray-400');
                }
            });
            
            btn.classList.add('selected', 'bg-black', 'text-white', 'border-black', 'shadow-md');
            btn.classList.remove('border-gray-200', 'text-gray-600', 'dark:border-slate-700', 'dark:text-gray-400');
        }

        // Address Logic
        function selectAddress(index, containerId) {
            if (containerId === 'profile-address-list') return; // Don't select in profile edit mode

            // Update state
            userData.addresses.forEach((a, i) => a.selected = (i === index));
            
            // Re-render to show visual update
            renderAddresses(containerId);
        }

        // --- NEW ADDRESS MANAGEMENT LOGIC ---
        
        function openAddressModal(editIndex = null) {
            const modal = document.getElementById('address-modal');
            const title = document.getElementById('address-modal-title');
            const textInput = document.getElementById('addr-text');
            const tagInput = document.getElementById('addr-tag-input');
            const idInput = document.getElementById('addr-id');

            // Reset or Fill Form
            if (editIndex !== null) {
                const addr = userData.addresses[editIndex];
                title.innerText = "Edit Address";
                textInput.value = addr.text;
                tagInput.value = addr.tag;
                idInput.value = editIndex; // Using index as ID for simplicity
                
                // Visual Tag Selection
                document.querySelectorAll('#addr-tags button').forEach(b => {
                    if(b.innerText === addr.tag) selectTag(b, addr.tag);
                });
            } else {
                title.innerText = "Add New Address";
                textInput.value = "";
                tagInput.value = "Home";
                idInput.value = "";
                selectTag(document.querySelector('#addr-tags button:first-child'), 'Home');
            }

            openModal('address-modal');
        }

        function selectTag(btn, tag) {
            // Visual Update
            const siblings = btn.parentElement.children;
            for(let i=0; i<siblings.length; i++) {
                siblings[i].classList.remove('bg-black', 'text-white', 'border-black', 'dark:bg-white', 'dark:text-black', 'dark:border-white');
                siblings[i].classList.add('text-gray-500', 'border-gray-200', 'dark:border-slate-700', 'dark:text-gray-400');
            }
            btn.classList.remove('text-gray-500', 'border-gray-200', 'dark:border-slate-700', 'dark:text-gray-400');
            btn.classList.add('bg-black', 'text-white', 'border-black');
            if(document.documentElement.classList.contains('dark')) {
                btn.classList.add('dark:bg-white', 'dark:text-black', 'dark:border-white');
            }
            
            // Value Update
            document.getElementById('addr-tag-input').value = tag;
        }

        function saveAddress() {
            const text = document.getElementById('addr-text').value;
            const tag = document.getElementById('addr-tag-input').value;
            const editIndex = document.getElementById('addr-id').value;

            if(!text) {
                alert("Please enter address details");
                return;
            }

            if(editIndex !== "") {
                // Edit Existing
                userData.addresses[editIndex].text = text;
                userData.addresses[editIndex].tag = tag;
                showToast("Address Updated");
            } else {
                // Add New
                userData.addresses.push({
                    id: Date.now(),
                    tag: tag,
                    text: text,
                    selected: true // Auto select new
                });
                
                // Deselect others if auto-selecting new
                userData.addresses.forEach((a, i) => {
                    if (i !== userData.addresses.length - 1) a.selected = false;
                });
                
                showToast("New Address Added");
            }

            closeModal('address-modal');
            
            // Refresh views
            if(!document.getElementById('full-checkout-modal').classList.contains('hidden')) {
                renderAddresses('address-list');
            }
            if(!document.getElementById('profile-modal').classList.contains('hidden')) {
                renderAddresses('profile-address-list');
            }
        }

        function editAddress(index) {
            openAddressModal(index);
        }

        function deleteAddress(index) {
            if(confirm("Delete this address?")) {
                userData.addresses.splice(index, 1);
                renderAddresses('profile-address-list');
            }
        }

        // --- END ADDRESS LOGIC ---

        function closeCheckoutModal() {
            document.getElementById('full-checkout-modal').classList.add('hidden');
        }

        function placeOrder() {
            // Loading State
            const btn = document.getElementById('place-order-btn');
            btn.innerHTML = `<i data-lucide="loader-2" class="w-5 h-5 animate-spin"></i> Processing...`;
            lucide.createIcons();

            setTimeout(() => {
                const bId = Math.floor(1000 + Math.random() * 9000);
                document.getElementById('booking-id').innerText = bId;
                
                // SAVE BOOKING HERE
                const total = Object.values(cart).reduce((a,b) => a + (b.price * b.qty), 0);
                const finalTotal = Math.max(0, total + 49 - couponDiscount);
                
                userData.bookings.unshift({
                    id: bId,
                    date: new Date().toLocaleDateString('en-IN', { day: 'numeric', month: 'short', year: 'numeric' }),
                    time: new Date().toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit' }),
                    items: Object.values(cart),
                    total: finalTotal,
                    status: 'Scheduled'
                });

                document.getElementById('checkout-success-modal').classList.remove('hidden');
                
                // Trigger Confetti
                confetti({
                    particleCount: 150,
                    spread: 70,
                    origin: { y: 0.6 },
                    colors: ['#FFC107', '#0F172A', '#22C55E']
                });

                // Reset Button
                btn.innerHTML = "Place Order";
            }, 1500);
        }

        function closeSuccessModal() {
            // Logic to stay logged in but clear cart
            cart = {};
            couponDiscount = 0;
            updateCartUI();
            
            // Hide Modals
            document.getElementById('checkout-success-modal').classList.add('hidden');
            document.getElementById('full-checkout-modal').classList.add('hidden');
            
            // Optional: Scroll to top
            window.scrollTo(0,0);
            showToast("Order placed successfully!");
        }

        // --- BOOKINGS DISPLAY LOGIC ---
        function openBookings() {
            renderBookings();
            openModal('bookings-modal');
        }

        function renderBookings() {
            const container = document.getElementById('bookings-list-container');
            
            if (userData.bookings.length === 0) {
                // Show Empty State
                container.innerHTML = `
                    <div class="p-12 text-center text-gray-400 flex flex-col items-center">
                        <div class="w-16 h-16 bg-gray-100 dark:bg-slate-800 rounded-full flex items-center justify-center mb-4"><i data-lucide="calendar-x" class="w-8 h-8 text-gray-300 dark:text-gray-500"></i></div>
                        <h4 class="text-lg font-bold text-gray-800 dark:text-white">No Active Bookings</h4>
                        <p class="text-sm">Looks like you haven't booked any services yet.</p>
                        <button onclick="closeModal('bookings-modal'); scrollToSection('services-slider')" class="mt-6 text-qc-yellow font-bold text-sm hover:underline">Browse Services</button>
                    </div>`;
            } else {
                // Show List
                container.innerHTML = `<div class="p-6 space-y-4 overflow-y-auto max-h-[60vh] hide-scroll">
                    ${userData.bookings.map(b => `
                        <div class="border border-gray-200 dark:border-slate-700 rounded-xl p-4 hover:shadow-md transition-shadow">
                            <div class="flex justify-between items-start mb-3">
                                <div>
                                    <span class="font-bold text-lg dark:text-white">#QC${b.id}</span>
                                    <div class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">${b.date}  ${b.time}</div>
                                </div>
                                <span class="bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wide">${b.status}</span>
                            </div>
                            <div class="space-y-2 mb-4 bg-gray-50 dark:bg-slate-800 p-3 rounded-lg">
                                ${b.items.map(i => `
                                    <div class="flex justify-between text-xs">
                                        <span class="text-gray-600 dark:text-gray-300"><span class="font-bold text-gray-900 dark:text-white">${i.qty}x</span> ${i.name}</span><span class="font-medium dark:text-white">${i.price * i.qty}</span>
                                                                </div>
                                                            `).join('')}
                                                        </div>
                                                        <div class="flex justify-between items-center border-t border-gray-200 dark:border-slate-700 pt-3">
                                                            <div class="font-bold dark:text-white">Total Paid: ${b.total}</div>
                                                            <button onclick="closeModal('bookings-modal'); openIssueModal('${b.id}')" class="text-xs font-bold text-red-500 border border-red-200 dark:border-red-900 bg-red-50 dark:bg-red-900/20 px-3 py-2 rounded-lg hover:bg-red-100 transition-colors">
                                                                Report Issue
                                                            </button>
                                                        </div>
                                                    </div>
                                                `).join('')}
                                            </div>`;
            }
            lucide.createIcons();
        }

        // --- WISHLIST LOGIC ---
        function toggleLike(btn, id) {
            // Prevent event bubbling if clicked on card
            if(event) event.stopPropagation();
            
            btn.classList.toggle('liked');
            const index = userData.wishlist.indexOf(id);
            
            if (index === -1) {
                userData.wishlist.push(id);
                showToast('Added to saved items');
                
                // Animation effect
                btn.style.transform = "scale(1.2)";
                setTimeout(() => btn.style.transform = "scale(1)", 200);
            } else {
                userData.wishlist.splice(index, 1);
                showToast('Removed from saved items');
            }
        }

        function openWishlist() {
            const container = document.getElementById('wishlist-list-container');
            
            // Filter items that are in wishlist (Checking both Hardware and Services)
            const savedItems = [
                ...hardware.filter(i => userData.wishlist.includes(i.id)),
                ...services.filter(i => userData.wishlist.includes(i.id))
            ];

            if (savedItems.length === 0) {
                container.innerHTML = `
                    <div class="p-12 text-center text-gray-400">
                        <i data-lucide="heart" class="w-12 h-12 mx-auto mb-3 opacity-20"></i>
                        <p>No saved items yet.</p>
                    </div>`;
            } else {
                container.innerHTML = savedItems.map(item => `
                    <div class="flex gap-4 p-4 border-b border-gray-100 dark:border-slate-800 last:border-0 hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors cursor-pointer" onclick="addToCart(${item.id}, '${hardware.includes(item) ? 'hw' : 'sv'}')">
                        <div class="w-20 h-20 rounded-lg overflow-hidden bg-gray-100 shrink-0">
                            <img src="${item.img}" class="w-full h-full object-cover">
                        </div>
                        <div class="flex-1">
                            <div class="flex justify-between items-start">
                                <h4 class="font-bold dark:text-white">${item.name}</h4>
                                <button onclick="event.stopPropagation(); toggleLike(this, ${item.id}); openWishlist()" class="text-red-500"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                            </div>
                            <div class="text-sm font-medium text-gray-500 dark:text-gray-400">${item.price}</div>
                            <button class="mt-2 text-xs font-bold bg-black dark:bg-white text-white dark:text-black px-3 py-1.5 rounded-md">Add to Cart</button>
                        </div>
                    </div>
                `).join('');
            }
            
            openModal('wishlist-modal');
            lucide.createIcons();
        }

        // --- SUPPORT / ISSUE CHAT LOGIC ---
        function openIssueModal(orderId) {
            document.getElementById('issue-order-id').innerText = orderId;
            // Reset Chat
            const chatBody = document.getElementById('issue-chat-body');
            chatBody.innerHTML = `
                <div class="flex gap-3">
                    <div class="w-8 h-8 rounded-full bg-qc-yellow flex items-center justify-center font-bold text-xs shrink-0 text-black">QC</div>
                    <div class="bg-gray-100 dark:bg-slate-800 p-3 rounded-2xl rounded-tl-none text-sm dark:text-gray-200 max-w-[80%]">
                        Hi! I'm here to help with Order #${orderId}. Please describe the issue or upload a photo.
                    </div>
                </div>`;
            openModal('issue-modal');
        }

        function sendIssueMessage() {
            const input = document.getElementById('issue-input');
            const msg = input.value.trim();
            if(!msg) return;

            const chatBody = document.getElementById('issue-chat-body');

            // User Message
            const userHTML = `
                <div class="flex gap-3 flex-row-reverse animate-bounce-in">
                    <div class="w-8 h-8 rounded-full bg-black dark:bg-white text-white dark:text-black flex items-center justify-center font-bold text-xs shrink-0">Me</div>
                    <div class="bg-black dark:bg-white text-white dark:text-black p-3 rounded-2xl rounded-tr-none text-sm max-w-[80%]">
                        ${msg}
                    </div>
                </div>`;
            chatBody.insertAdjacentHTML('beforeend', userHTML);
            input.value = '';
            chatBody.scrollTop = chatBody.scrollHeight;

            // Bot Typing Simulation
            setTimeout(() => {
                const botHTML = `
                <div class="flex gap-3 animate-bounce-in">
                    <div class="w-8 h-8 rounded-full bg-qc-yellow flex items-center justify-center font-bold text-xs shrink-0 text-black">QC</div>
                    <div class="bg-gray-100 dark:bg-slate-800 p-3 rounded-2xl rounded-tl-none text-sm dark:text-gray-200 max-w-[80%]">
                        I've noted that down. A support agent will review your request and call you within 15 minutes.
                    </div>
                </div>`;
                chatBody.insertAdjacentHTML('beforeend', botHTML);
                chatBody.scrollTop = chatBody.scrollHeight;
            }, 1000);
        }

        function triggerFileUpload() {
            document.getElementById('issue-file-upload').click();
        }

        function handleFileSelect(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const chatBody = document.getElementById('issue-chat-body');
                    const imgHTML = `
                    <div class="flex gap-3 flex-row-reverse animate-bounce-in">
                        <div class="w-8 h-8 rounded-full bg-black dark:bg-white text-white dark:text-black flex items-center justify-center font-bold text-xs shrink-0">Me</div>
                        <div class="p-1 border border-gray-200 dark:border-slate-700 rounded-xl rounded-tr-none max-w-[80%] bg-white dark:bg-slate-900">
                            <img src="${e.target.result}" class="rounded-lg max-h-40">
                        </div>
                    </div>`;
                    chatBody.insertAdjacentHTML('beforeend', imgHTML);
                    chatBody.scrollTop = chatBody.scrollHeight;
                    
                    // Bot response to image
                    setTimeout(() => {
                        const botHTML = `
                        <div class="flex gap-3 animate-bounce-in">
                             <div class="w-8 h-8 rounded-full bg-qc-yellow flex items-center justify-center font-bold text-xs shrink-0 text-black">QC</div>
                            <div class="bg-gray-100 dark:bg-slate-800 p-3 rounded-2xl rounded-tl-none text-sm dark:text-gray-200 max-w-[80%]">
                                Thanks for the photo. Validating now...
                            </div>
                        </div>`;
                        chatBody.insertAdjacentHTML('beforeend', botHTML);
                        chatBody.scrollTop = chatBody.scrollHeight;
                    }, 1000);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        // --- AUTHENTICATION LOGIC ---
        function sendOtp() {
            const phone = document.getElementById('login-phone').value;
            if (phone.length < 10) {
                alert("Please enter a valid number");
                return;
            }
            document.getElementById('otp-phone-display').innerText = "+91 " + phone;
            document.getElementById('login-step-1').classList.add('-translate-x-full', 'opacity-0');
            document.getElementById('login-step-1').style.display = 'none'; // logic helper
            
            const step2 = document.getElementById('login-step-2');
            step2.classList.remove('hidden', 'translate-x-full');
            // Small delay to allow display block to apply before transition
            setTimeout(() => {
                step2.classList.remove('translate-x-full');
            }, 50);

            // Auto focus first OTP input
            setTimeout(() => {
               document.querySelector('.otp-input').focus(); 
            }, 300);
        }

        function backToPhone() {
            document.getElementById('login-step-2').classList.add('translate-x-full');
            
            setTimeout(() => {
                 document.getElementById('login-step-2').classList.add('hidden');
                 const step1 = document.getElementById('login-step-1');
                 step1.style.display = 'block';
                 setTimeout(() => {
                    step1.classList.remove('-translate-x-full', 'opacity-0');
                 }, 50);
            }, 300);
        }

// REPLACEMENT FUNCTION 1: Checks OTP, then shows Name screen
function verifyOtp() {
    const inputs = document.querySelectorAll('.otp-input');
    let otp = '';
    inputs.forEach(i => otp += i.value);
    
    if (otp.length === 4) {
        // Hide OTP Screen
        document.getElementById('login-step-2').classList.add('hidden');
        // Show Name Screen
        document.getElementById('login-step-3').classList.remove('hidden', 'translate-x-full');
    } else {
        alert("Please enter valid OTP");
    }
}

// NEW FUNCTION 2: Saves the name and logs you in
function finishLogin() {
    const nameInput = document.getElementById('new-user-name').value;
    
    if(nameInput) {
        // Save Name
        userData.name = nameInput;
        userData.initials = nameInput.slice(0, 2).toUpperCase();
        
        // Save to Memory (so it stays after refresh)
        localStorage.setItem('qc_userName', nameInput);
        localStorage.setItem('qc_isLoggedIn', 'true');
        
        // Log in
        isLoggedIn = true;
        closeModal('login-modal');
        updateAuthUI();
        showToast("Welcome " + nameInput + "!");
    } else {
        alert("Enter your name!");
    }
}

        // Handle OTP Input Auto-Next
        document.querySelectorAll('.otp-input').forEach((input, index, inputs) => {
            input.addEventListener('input', () => {
                if(input.value.length === 1 && index < inputs.length - 1) {
                    inputs[index + 1].focus();
                }
            });
            input.addEventListener('keydown', (e) => {
                if(e.key === 'Backspace' && input.value.length === 0 && index > 0) {
                    inputs[index - 1].focus();
                }
            });
        });

   function updateAuthUI() {
    // 1. Determine what to show (Image or Initials?)
    let avatarHTML = '';
    if (userData.avatar) {
        avatarHTML = `<img src="${userData.avatar}" class="w-full h-full object-cover">`;
    } else {
        avatarHTML = userData.initials;
    }

    // 2. Update Header Button
    const authSection = document.getElementById('auth-section');
    if (isLoggedIn && authSection) {
        authSection.innerHTML = `
            <button onclick="openModal('profile-modal')" class="flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-slate-800 p-1 pr-3 rounded-full transition-colors border border-gray-200 dark:border-slate-700">
                <div class="w-8 h-8 bg-qc-yellow rounded-full flex items-center justify-center font-bold text-sm text-black border border-black overflow-hidden">
                    ${avatarHTML}
                </div>
                <span class="font-bold text-sm hidden md:block dark:text-white">Profile</span>
            </button>
        `;
    }

    // 3. Update Profile Modal Big Circle
    const modalAvatar = document.getElementById('profile-avatar-display');
    if (modalAvatar) {
        modalAvatar.innerHTML = avatarHTML;
    }
    
    // 4. Fill Input Fields
    const pName = document.getElementById('profile-name');
    const pEmail = document.getElementById('profile-email');
    if(pName) pName.value = userData.name;
    if(pEmail) pEmail.value = userData.email;
}
        
        function saveProfile() {
            userData.name = document.getElementById('profile-name').value;
            userData.email = document.getElementById('profile-email').value;
            showToast("Profile Updated Successfully");
            closeModal('profile-modal');
        }

        // --- UTILITIES ---
        function openModal(id) {
            const modal = document.getElementById(id);
            modal.classList.remove('hidden');
            // Trigger reflow
            void modal.offsetWidth;
            
            modal.querySelector('.modal-overlay').classList.remove('opacity-0');
            modal.querySelector('.modal-content').classList.remove('scale-95', 'opacity-0');
        }

        function closeModal(id) {
            const modal = document.getElementById(id);
            modal.querySelector('.modal-overlay').classList.add('opacity-0');
            modal.querySelector('.modal-content').classList.add('scale-95', 'opacity-0');
            
            setTimeout(() => {
                modal.classList.add('hidden');
                modal.querySelector('.modal-overlay').classList.remove('opacity-0'); // reset
                modal.querySelector('.modal-content').classList.remove('scale-95', 'opacity-0'); // reset
            }, 300);
        }

     function toggleCart() {
    const drawer = document.getElementById('cart-drawer');
    const overlay = document.getElementById('drawer-overlay');
    
    // Check for the new [120%] class instead of 'full'
    if (drawer.classList.contains('translate-x-[120%]')) {
        drawer.classList.remove('translate-x-[120%]'); // Open it
        overlay.classList.remove('hidden');
        setTimeout(() => overlay.classList.remove('opacity-0'), 10);
    } else {
        drawer.classList.add('translate-x-[120%]'); // Close it completely
        overlay.classList.add('opacity-0');
        setTimeout(() => overlay.classList.add('hidden'), 300);
    }
}

        function showToast(msg) {
            const toast = document.getElementById('toast');
            document.getElementById('toast-msg').innerText = msg;
            
            toast.classList.remove('translate-y-20', 'opacity-0');
            
            setTimeout(() => {
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }

        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function scrollSlider(id, direction) {
            const slider = document.getElementById(id);
            const scrollAmount = 300;
            slider.scrollBy({ left: scrollAmount * direction, behavior: 'smooth' });
        }
// --- TYPING ANIMATION LOGIC ---
function initTypingAnimation() {
    const input = document.getElementById('global-search');
    const placeholders = [
        "Search for 'AC Repair'...",
        "Search for 'Painting'...",
        "Search for 'Plumbing'...",
        "Search for 'Smart Locks'...",
        "Search for 'Cleaning'..."
    ];
    let phraseIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    let wait = false;

    function type() {
        const currentPhrase = placeholders[phraseIndex];
        
        if (wait) {
            setTimeout(() => { wait = false; requestAnimationFrame(type); }, 2000);
            return;
        }

        if (isDeleting) {
            input.placeholder = currentPhrase.substring(0, charIndex - 1);
            charIndex--;
        } else {
            input.placeholder = currentPhrase.substring(0, charIndex + 1);
            charIndex++;
        }

        if (!isDeleting && charIndex === currentPhrase.length) {
            isDeleting = true;
            wait = true;
        } else if (isDeleting && charIndex === 0) {
            isDeleting = false;
            phraseIndex = (phraseIndex + 1) % placeholders.length;
        }

        setTimeout(() => requestAnimationFrame(type), isDeleting ? 50 : 100);
    }
    
    requestAnimationFrame(type);
}
     // --- GLOBAL SEARCH LOGIC ---

        // 1. Helper to gather ALL items (Products + Deep Service Items)
        function getAllSearchItems() {
            let allItems = [
                ...hardware.map(i => ({...i, type: 'hw', category: 'Hardware'})), 
                ...services.map(i => ({...i, type: 'sv', category: 'Service'}))
            ];
            
            // Dig into the detailed serviceData
            Object.keys(serviceData).forEach(key => {
                const categoryData = serviceData[key];
                if(categoryData.items) {
                    categoryData.items.forEach(item => {
                        if(!allItems.find(existing => existing.id == item.id)) {
                            allItems.push({
                                ...item,
                                type: 'sv', 
                                categoryKey: key, 
                                category: categoryData.title
                            });
                        }
                    });
                }
            });
            return allItems;
        }

        // 2. Updated Search Function (With Suggestions)
        function handleSearch(query) {
            const resultsContainer = document.getElementById('search-results');
            
            if (query.length > 0) { 
                resultsContainer.classList.remove('hidden');
                
                const allItems = getAllSearchItems(); 
                const lowerQuery = query.toLowerCase();
                
                const matchedItems = allItems.filter(item => 
                    item.name.toLowerCase().includes(lowerQuery) || 
                    (item.desc && item.desc.toLowerCase().includes(lowerQuery))
                );
                
                let html = '';
                
                if (matchedItems.length === 0) {
                     html = `<div class="p-4 text-center text-gray-400 text-sm">No results found for "${query}"</div>`;
                } else {
                     html += `<div class="p-2 text-xs font-bold text-gray-400 uppercase tracking-wider">Suggestions</div>`;
                     
                     matchedItems.slice(0, 6).forEach(item => {
                         const clickAction = item.categoryKey 
                            ? `openDrawer('${item.categoryKey}'); document.getElementById('search-results').classList.add('hidden');` 
                            : `selectSearch('${item.name}', '${item.type}', '${item.id}')`;

                         html += `
                         <div class="hover:bg-gray-50 dark:hover:bg-slate-800 p-3 cursor-pointer flex items-center gap-3 transition-colors border-b border-gray-100 dark:border-slate-800 last:border-0" onclick="${clickAction}">
                             <div class="w-10 h-10 rounded-lg bg-gray-100 dark:bg-slate-700 flex items-center justify-center shrink-0 overflow-hidden">
                                ${item.img ? `<img src="${item.img}" class="w-full h-full object-cover">` : `<span class="text-xs font-bold text-gray-500">QC</span>`}
                             </div>
                             <div>
                                <div class="dark:text-white text-sm font-bold leading-tight">${item.name}</div>
                                <div class="flex items-center gap-2 mt-0.5">
                                    <span class="text-[10px] bg-gray-200 dark:bg-slate-600 px-1.5 rounded text-gray-600 dark:text-gray-300">${item.category || 'Item'}</span>
                                    ${item.price ? `<span class="text-xs text-gray-500 dark:text-gray-400">${item.price}</span>` : ''}
                                </div>
                             </div>
                         </div>`;
                     });
                }
                resultsContainer.innerHTML = html;
            } else {
                resultsContainer.innerHTML = `
                    <div class="p-3 text-xs font-bold text-gray-400 uppercase">Popular Searches</div>
                    <div class="hover:bg-gray-50 dark:hover:bg-slate-800 p-3 cursor-pointer flex items-center gap-3 transition-colors" onclick="selectSearch('AC Service')"><i data-lucide="trending-up" class="w-4 h-4 text-gray-400"></i> AC Service</div>
                    <div class="hover:bg-gray-50 dark:hover:bg-slate-800 p-3 cursor-pointer flex items-center gap-3 transition-colors" onclick="selectSearch('Drill Machine')"><i data-lucide="trending-up" class="w-4 h-4 text-gray-400"></i> Bosch Drill</div>
                `;
            }
            lucide.createIcons(); 
        }

       function selectSearch(term, type, id) {
    // Select correct input based on screen size
    const input = window.innerWidth < 1024 
        ? document.getElementById('global-search-mobile') 
        : document.getElementById('global-search-desktop');
        
    if(input) input.value = term;
    
    document.getElementById('search-results').classList.add('hidden');
    
    if(type && id) {
        if(type === 'hw') {
            scrollToSection('hardware-slider');
        } else if (type === 'sv') {
            if(term.includes('AC')) openDrawer('ac');
            else if(term.includes('Clean')) openDrawer('cleaning');
            else if(term.includes('Paint')) openDrawer('paint');
        }
    }
}
        
        // 3. Dropdown Visibility Logic
        function initSearchDropdown() {
            const input = document.getElementById('global-search');
            input.addEventListener('focus', () => {
                if(input.value.length > 0) document.getElementById('search-results').classList.remove('hidden');
            });
            document.addEventListener('click', (e) => {
                if (!e.target.closest('#global-search') && !e.target.closest('#search-results')) {
                    document.getElementById('search-results').classList.add('hidden');
                }
            });
        }

      // 4. SEARCH BAR AUTO TYPING ANIMATION
function initSearchTypingAnimation() {
    // 1. Find ALL possible search inputs (Old ID, New Mobile ID, New Desktop ID)
    const possibleIds = ['global-search', 'global-search-mobile', 'global-search-desktop'];
    const foundInputs = [];

    possibleIds.forEach(id => {
        const el = document.getElementById(id);
        if (el) foundInputs.push(el);
    });

    // 2. Debugging: Check console to see if it found anything
    if (foundInputs.length === 0) {
        console.log("QC DEBUG: No search bar found! Check if your input has an ID.");
        return;
    }

    const phrases = [
        "Search for 'AC Repair'...",
        "Search for 'Painting'...",
        "Search for 'Plumbing'...",
        "Search for 'Smart Locks'...",
        "Search for 'Cleaning'..."
    ];
    
    let phraseIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    
    function type() {
        const currentPhrase = phrases[phraseIndex];
        const currentText = currentPhrase.substring(0, charIndex);
        
        // Update every search bar we found
        foundInputs.forEach(input => {
            // Only update if the user is NOT currently typing in it
            if (document.activeElement !== input) {
                input.placeholder = currentText;
            }
        });

        if (!isDeleting && charIndex < currentPhrase.length) {
            charIndex++;
            setTimeout(type, 100);
        } else if (isDeleting && charIndex > 0) {
            charIndex--;
            setTimeout(type, 50);
        } else {
            if (!isDeleting) {
                isDeleting = true;
                setTimeout(type, 2000);
            } else {
                isDeleting = false;
                phraseIndex = (phraseIndex + 1) % phrases.length;
                setTimeout(type, 500);
            }
        }
    }
    
    // Start the loop
    type();
}
        // 5. Location Logic
        function useCurrentLocation() {
            document.getElementById('loc-status').innerText = "Fetching...";
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition((position) => {
                    document.getElementById('header-location').innerText = "My Location";
                    closeModal('location-modal');
                    showToast("Location updated!");
                }, () => {
                     document.getElementById('loc-status').innerText = "Permission Denied";
                });
            }
        }

       // --- INIT ---
document.addEventListener('DOMContentLoaded', () => {
    // 1. Check Dark Mode
    if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
    } else {
        document.documentElement.classList.remove('dark');
    }

    // 2. SMART AUTO-LOGIN (Fixes the Empty Profile Issue)
    const savedName = localStorage.getItem('qc_userName');
    const savedLogin = localStorage.getItem('qc_isLoggedIn');

    if (savedLogin === 'true' && savedName) {
        // Restore User Data
        userData.name = savedName;
        userData.initials = savedName.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();
        if(localStorage.getItem('qc_userAvatar')) {
            userData.avatar = localStorage.getItem('qc_userAvatar');
        }
        isLoggedIn = true;
        updateAuthUI(); 
    } else {
        // No name found? Stay logged out.
        isLoggedIn = false;
        localStorage.removeItem('qc_isLoggedIn'); 
    }

    // 3. START ANIMATIONS (Your animation is safe here )
    if(typeof renderContent === 'function') renderContent();
    if(typeof lucide !== 'undefined') lucide.createIcons();
    
    // --- THIS LINE KEEPS YOUR TYPING ANIMATION WORKING ---
    if(typeof initSearchTypingAnimation === 'function') initSearchTypingAnimation();
    // ----------------------------------------------------

    if(typeof generatePatternTexture === 'function') generatePatternTexture();
});
function uploadProfileImage(input) {
    if (input.files && input.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
            userData.avatar = e.target.result;
            updateAuthUI(); 
            showToast("Profile Picture Updated");
        }
        reader.readAsDataURL(input.files[0]);
    }
}
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            generateFloatingTools();
        });

        function generateFloatingTools() {
            const container = document.getElementById('floating-texture');
            // List of Lucide icons to use as texture
            const tools = [
                'hammer', 'wrench', 'ruler', 'hard-hat', 
                'paint-bucket', 'plug', 'drill', 'shovel', 
                'axe', 'scissors', 'zap'
            ];
            
            // Generate 25 random icons
            for(let i = 0; i < 25; i++) {
                const icon = document.createElement('i');
                
                // Pick a random tool
                const randomTool = tools[Math.floor(Math.random() * tools.length)];
                icon.setAttribute('data-lucide', randomTool);
                
                // Random Position (0% to 100% of screen)
                const left = Math.floor(Math.random() * 100);
                const top = Math.floor(Math.random() * 100);
                
                // Random Size (30px to 80px)
                const size = Math.floor(Math.random() * 50) + 30;
                
                // Random Rotation (0 to 360 deg)
                const rotate = Math.floor(Math.random() * 360);
                
                // Random Animation Delay (so they don't all float together)
                const delay = Math.random() * 5;

                // Apply Styles
                icon.style.position = 'absolute';
                icon.style.left = `${left}%`;
                icon.style.top = `${top}%`;
                icon.style.width = `${size}px`;
                icon.style.height = `${size}px`;
                icon.style.transform = `rotate(${rotate}deg)`;
                
                // Very subtle opacity (visible but not distracting)
                icon.style.opacity = '0.04'; 
                
                // Use Tailwind classes for color (Dark mode compatible)
               icon.classList.add('text-cyan-600', 'dark:text-cyan-400', 'animate-float-gentle');
                icon.style.animationDelay = `${delay}s`; // Stagger the floating animation

                container.appendChild(icon);
            }
            
            // IMPORTANT: Refresh icons so Lucide renders the new elements
            lucide.createIcons();
        }
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            generatePatternTexture();
        });

        function generatePatternTexture() {
            const container = document.getElementById('floating-texture');
            // Clear any existing texture
            container.innerHTML = '';

            // Tool options
            const tools = [
                'hammer', 'wrench', 'ruler', 'paint-bucket', 
                'plug', 'drill', 'axe', 'hard-hat', 'shovel', 
                'scissors', 'zap', 'settings'
            ];

            // CONFIGURATION: Adjust these to make it more/less dense
            const spacing = 120; // Space between items (lower = more dense)
            
            // Calculate how many rows and columns fit on screen
            const cols = Math.ceil(window.innerWidth / spacing);
            const rows = Math.ceil(window.innerHeight / spacing);

            for (let r = 0; r < rows; r++) {
                for (let c = 0; c < cols; c++) {
                    
                    const icon = document.createElement('i');
                    
                    // 1. Pick a random tool
                    const randomTool = tools[Math.floor(Math.random() * tools.length)];
                    icon.setAttribute('data-lucide', randomTool);

                    // 2. Calculate Position (Grid + Random Jitter)
                    // We place it in the grid cell, then move it randomly by -30px to +30px
                    const jitterX = (Math.random() * 60) - 30;
                    const jitterY = (Math.random() * 60) - 30;
                    
                    const left = (c * spacing) + jitterX;
                    const top = (r * spacing) + jitterY;

                    // 3. Random Properties
                    const size = Math.floor(Math.random() * 20) + 30; // Size between 30px and 50px
                    const rotate = Math.floor(Math.random() * 360);   // Full rotation
                    const delay = Math.random() * 5;                  // Random float delay

                    // 4. Apply Styles
                    icon.style.position = 'absolute';
                    icon.style.left = `${left}px`;
                    icon.style.top = `${top}px`;
                    icon.style.width = `${size}px`;
                    icon.style.height = `${size}px`;
                    icon.style.transform = `rotate(${rotate}deg)`;
                    icon.style.opacity = '0.03'; // Very subtle (3% opacity)
                    
                    // Animation & Color classes
                    icon.classList.add('text-black', 'dark:text-white', 'animate-float-gentle');
                    icon.style.animationDelay = `${delay}s`;

                    container.appendChild(icon);
                }
            }
            
            // Render the icons
            lucide.createIcons();
        }

        // Re-generate on resize to keep the pattern consistent
        let resizeTimer;
      window.addEventListener('resize', () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(generatePatternTexture, 200);
  }); // Closes the resize listener

        // --- LOGOUT FUNCTIONS ---
        function confirmLogout() {
            if (confirm("Are you sure you want to logout?")) {
                isLoggedIn = false;
                localStorage.removeItem('qc_isLoggedIn');
                localStorage.removeItem('qc_userName'); // Clear name
                closeModal('profile-modal');
                window.location.reload();
            }
        }
document.addEventListener('DOMContentLoaded', () => {
    // Icons init
    if(typeof lucide !== 'undefined') lucide.createIcons();

    const loader = document.getElementById('loader-wrapper');
    const textEl = document.getElementById('loading-text');

    // Sync Status Text with Animation Phases
    setTimeout(() => { if(textEl) textEl.innerText = "Truck Arriving..."; }, 100);
    setTimeout(() => { if(textEl) textEl.innerText = "Unloading Bricks..."; }, 1000);
    setTimeout(() => { if(textEl) textEl.innerText = "Workers Assembling..."; }, 2000);
    setTimeout(() => { if(textEl) textEl.innerText = "Construction Complete!"; }, 3500);

    // Fade Out & Remove
    setTimeout(() => {
        if(loader) {
            loader.style.opacity = '0';
            loader.style.pointerEvents = 'none';
            setTimeout(() => { loader.remove(); }, 500);
        }
        // Trigger Main Page Animations
        document.querySelectorAll('.scroll-trigger').forEach(el => el.classList.add('visible'));
    }, 4000);
});
    </script>
    
    <div class="fixed bottom-0 left-0 w-full bg-white dark:bg-slate-950 border-t border-gray-200 dark:border-slate-800 lg:hidden z-[60] flex justify-around items-center py-3 pb-safe shadow-[0_-10px_40px_-15px_rgba(0,0,0,0.1)]">
        <button class="flex flex-col items-center gap-1 text-black dark:text-white" onclick="window.scrollTo(0,0)">
            <i data-lucide="home" class="w-6 h-6 fill-current"></i>
            <span class="text-[10px] font-bold">Home</span>
        </button>
        <button class="flex flex-col items-center gap-1 text-gray-400 hover:text-black dark:hover:text-white" onclick="openHireMap()">
            <i data-lucide="map" class="w-6 h-6"></i>
            <span class="text-[10px] font-bold">Map</span>
        </button>
        <button class="flex flex-col items-center gap-1 text-gray-400 hover:text-black dark:hover:text-white" onclick="openBookings()">
            <i data-lucide="calendar" class="w-6 h-6"></i>
            <span class="text-[10px] font-bold">Bookings</span>
        </button>
        <button class="flex flex-col items-center gap-1 text-gray-400 hover:text-black dark:hover:text-white" onclick="openModal('profile-modal')">
            <i data-lucide="user" class="w-6 h-6"></i>
            <span class="text-[10px] font-bold">Profile</span>
        </button>
    </div>
<div id="cart-notification" class="fixed top-20 right-4 md:right-10 z-[160] hidden transition-all duration-300 transform translate-y-[-20px] opacity-0">
    <div class="bg-white dark:bg-slate-900 w-[300px] rounded-xl shadow-2xl border border-gray-200 dark:border-slate-800 overflow-hidden relative">
        <div class="absolute -top-2 right-6 w-4 h-4 bg-green-50 dark:bg-slate-800 rotate-45 border-l border-t border-green-100 dark:border-slate-700"></div>

        <div class="bg-green-50 dark:bg-green-900/20 p-3 flex justify-between items-center border-b border-green-100 dark:border-green-900/30">
            <div class="flex items-center gap-2">
                <div class="bg-green-500 rounded-full p-1"><i data-lucide="check" class="w-3 h-3 text-white"></i></div>
                <span class="font-bold text-sm text-green-700 dark:text-green-400">Added to cart</span>
            </div>
            <button onclick="hideCartNotification()"><i data-lucide="x" class="w-4 h-4 text-gray-400"></i></button>
        </div>
        <div class="p-4 flex gap-3">
            <img id="notif-img" src="" class="w-14 h-14 rounded-lg object-cover bg-gray-100 border border-gray-100 dark:border-slate-700">
            <div>
                <div id="notif-name" class="font-bold text-sm text-gray-900 dark:text-white line-clamp-2 leading-tight">Product Name</div>
                <div class="text-xs text-gray-500 mt-1">Price: <span id="notif-price" class="font-bold text-black dark:text-white">0</span></div>
            </div>
        </div>
        <div class="p-3 pt-0">
            <button onclick="toggleCart(); hideCartNotification()" class="w-full py-2.5 rounded-lg border border-red-500 text-red-500 font-bold text-sm hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors">
                View Cart
            </button>
        </div>
    </div>
</div>
<div id="consultant-wrapper" class="fixed bottom-0 right-2 md:right-8 z-[150] flex flex-col items-end pointer-events-none">
    
    <div id="consultant-bubble" class="mr-4 mb-2 bg-white dark:bg-slate-800 text-black dark:text-white px-4 py-3 rounded-2xl rounded-tr-none shadow-2xl border border-gray-100 dark:border-slate-700 max-w-[200px] transform scale-0 origin-bottom-right transition-transform duration-500 opacity-0 relative">
        <p id="consultant-text" class="text-xs font-bold leading-relaxed">...</p>
        
        <div class="absolute -bottom-2 right-0 w-4 h-4 bg-white dark:bg-slate-800 border-b border-r border-gray-100 dark:border-slate-700 transform rotate-45"></div>
        
        <button onclick="dismissBubble()" class="absolute -top-2 -left-2 bg-gray-200 text-gray-500 rounded-full p-0.5 pointer-events-auto hover:bg-red-500 hover:text-white transition-colors">
            <i data-lucide="x" class="w-3 h-3"></i>
        </button>
    </div>

    <div onclick="openModal('consultant-modal')" class="relative cursor-pointer group pointer-events-auto transition-transform hover:scale-105 active:scale-95">
        
      <div class="absolute top-0 right-0 z-20 w-3 h-3 bg-green-500 border-2 border-white dark:border-slate-900 rounded-full animate-pulse"></div>
        <img src="https://www.pngall.com/wp-content/uploads/14/Saul-Goodman-PNG-Picture.png" 
             id="consultant-img"
             class="w-27 md:w-20 h-auto object-contain drop-shadow-2xl translate-y-[120%] transition-transform duration-1000 ease-out"
             alt="Estimate Consultant">
             
        <div class="absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/80 text-white text-[10px] px-2 py-0.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
            Click to Call
        </div>
    </div>

</div>

<div id="consultant-modal" class="fixed inset-0 z-[200] hidden">
    <div class="absolute inset-0 bg-black/60 modal-overlay backdrop-blur-sm transition-opacity opacity-0" onclick="closeModal('consultant-modal')"></div>
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-slate-900 w-[90%] max-w-sm rounded-2xl shadow-2xl p-6 modal-content scale-95 opacity-0 text-center border border-gray-100 dark:border-slate-800 transition-all duration-300">
        <button onclick="closeModal('consultant-modal')" class="absolute top-4 right-4 text-gray-400 hover:text-black dark:hover:text-white transition-colors"><i data-lucide="x" class="w-6 h-6"></i></button>
        <div class="w-16 h-16 bg-qc-yellow/20 rounded-full flex items-center justify-center mx-auto mb-4 border-4 border-white dark:border-slate-800 shadow-lg"><i data-lucide="phone-call" class="w-8 h-8 text-black dark:text-qc-yellow"></i></div>
        <h3 class="text-xl font-bold dark:text-white mb-2">Estimate Consultant</h3>
        <p class="text-gray-500 dark:text-gray-400 text-sm mb-6">Connect with our expert for a quick quote.</p>
        <div class="bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 p-4 rounded-xl mb-6 flex flex-col items-center justify-center gap-1"><span class="text-[10px] font-bold text-gray-400 uppercase tracking-widest">Direct Line</span><span class="text-xl font-black text-gray-900 dark:text-white tracking-wide select-all">+91 86080 54350</span></div>
        <a href="tel:+918608054350" class="flex items-center justify-center gap-2 w-full bg-qc-yellow text-black py-3.5 rounded-xl font-bold hover:bg-yellow-400 hover:shadow-lg hover:-translate-y-0.5 transition-all"><i data-lucide="phone" class="w-4 h-4 fill-current"></i> Call Now</a>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Start the animation sequence after a short delay (e.g., 2 seconds)
        setTimeout(initConsultantAnimation, 2000);
    });

    const messages = [
        " Hi! I am your Estimate Consultant.",
        " I will estimate for your work.",
        " Click me to get a Quote!"
    ];
    
    let msgIndex = 0;
    let bubbleVisible = true;

    function initConsultantAnimation() {
        const img = document.getElementById('consultant-img');
        const bubble = document.getElementById('consultant-bubble');
        
        // 1. Man Pops Up (Slide from bottom)
        if(img) {
            img.classList.remove('translate-y-[120%]'); // This line makes him appear!
        }

        // 2. Show Bubble after man arrives (1 second later)
        setTimeout(() => {
            if(bubbleVisible && bubble) {
                bubble.classList.remove('scale-0', 'opacity-0');
                cycleText(); // Start text loop
            }
        }, 1000);
    }

    function cycleText() {
        const textEl = document.getElementById('consultant-text');
        if(!textEl || !bubbleVisible) return;

        // Fade out text slightly
        textEl.style.opacity = 0;

        setTimeout(() => {
            // Change text
            textEl.innerText = messages[msgIndex];
            // Fade in text
            textEl.style.opacity = 1;
            
            // Increment index (Loop back to 0 at end)
            msgIndex = (msgIndex + 1) % messages.length;
        }, 300);

        // Schedule next change (every 4 seconds)
        setTimeout(cycleText, 4000);
    }

    function dismissBubble() {
        const bubble = document.getElementById('consultant-bubble');
        if(bubble) {
            bubble.classList.add('scale-0', 'opacity-0');
            bubbleVisible = false; // Stop the cycle
        }
    }
</script>
<script>
    // Create an observer to watch the Lottie player
    const lottieObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                // Play when visible
                entry.target.play();
            } else {
                // Stop (or pause) when out of view to save performance
                entry.target.stop(); 
            }
        });
    });

    // Start observing the element
    const lottieEl = document.getElementById('scroll-lottie');
    if (lottieEl) {
        lottieObserver.observe(lottieEl);
    }
</script>
</body>
</html>